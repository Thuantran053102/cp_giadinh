{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _MutableValue=_interopRequireDefault(require(\"./MutableValue\"));var Mapper=function(){function Mapper(module,mapper){var _this=this;var inputs=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var outputs=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];(0,_classCallCheck2.default)(this,Mapper);this.dirty=true;this.id=Mapper.MAPPER_ID++;this.inputs=this.extractMutablesFromArray(inputs);this.outputs=this.extractMutablesFromArray(outputs);this.mapper=mapper;var markDirty=function markDirty(){_this.dirty=true;module.maybeRequestRender();};this.inputs.forEach(function(input){input.addListener(markDirty);});}(0,_createClass2.default)(Mapper,[{key:\"execute\",value:function execute(){this.dirty=false;this.mapper();}},{key:\"extractMutablesFromArray\",value:function extractMutablesFromArray(array){var res=[];function extractMutables(value){if(value==null){}else if(value instanceof _MutableValue.default){res.push(value);}else if(Array.isArray(value)){value.forEach(function(v){return extractMutables(v);});}else if(typeof value==='object'){Object.keys(value).forEach(function(key){extractMutables(value[key]);});}}extractMutables(array);return res;}}]);return Mapper;}();exports.default=Mapper;Mapper.MAPPER_ID=1;","map":{"version":3,"names":["Mapper","module","mapper","inputs","outputs","dirty","id","MAPPER_ID","extractMutablesFromArray","markDirty","maybeRequestRender","forEach","input","addListener","array","res","extractMutables","value","MutableValue","push","Array","isArray","v","Object","keys","key"],"sources":["D:/React_Native/SourceCode_VPM_Swine/node_modules/react-native-reanimated/lib/reanimated2/js-reanimated/Mapper.js"],"sourcesContent":["import MutableValue from './MutableValue';\nexport default class Mapper {\n    constructor(module, mapper, inputs = [], outputs = []) {\n        this.dirty = true;\n        this.id = Mapper.MAPPER_ID++;\n        this.inputs = this.extractMutablesFromArray(inputs);\n        this.outputs = this.extractMutablesFromArray(outputs);\n        this.mapper = mapper;\n        const markDirty = () => {\n            this.dirty = true;\n            module.maybeRequestRender();\n        };\n        this.inputs.forEach((input) => {\n            input.addListener(markDirty);\n        });\n    }\n    execute() {\n        this.dirty = false;\n        this.mapper();\n    }\n    extractMutablesFromArray(array) {\n        const res = [];\n        function extractMutables(value) {\n            if (value == null) {\n                // return;\n            }\n            else if (value instanceof MutableValue) {\n                res.push(value);\n            }\n            else if (Array.isArray(value)) {\n                value.forEach((v) => extractMutables(v));\n            }\n            else if (typeof value === 'object') {\n                Object.keys(value).forEach((key) => {\n                    extractMutables(value[key]);\n                });\n            }\n        }\n        extractMutables(array);\n        return res;\n    }\n}\nMapper.MAPPER_ID = 1;\n"],"mappings":"yVAAA,oE,GACqBA,O,YACjB,gBAAYC,MAAZ,CAAoBC,MAApB,CAAuD,mBAA3BC,OAA2B,2DAAlB,EAAkB,IAAdC,QAAc,2DAAJ,EAAI,2CACnD,KAAKC,KAAL,CAAa,IAAb,CACA,KAAKC,EAAL,CAAUN,MAAM,CAACO,SAAP,EAAV,CACA,KAAKJ,MAAL,CAAc,KAAKK,wBAAL,CAA8BL,MAA9B,CAAd,CACA,KAAKC,OAAL,CAAe,KAAKI,wBAAL,CAA8BJ,OAA9B,CAAf,CACA,KAAKF,MAAL,CAAcA,MAAd,CACA,GAAMO,UAAS,CAAG,QAAZA,UAAY,EAAM,CACpB,KAAI,CAACJ,KAAL,CAAa,IAAb,CACAJ,MAAM,CAACS,kBAAP,GACH,CAHD,CAIA,KAAKP,MAAL,CAAYQ,OAAZ,CAAoB,SAACC,KAAD,CAAW,CAC3BA,KAAK,CAACC,WAAN,CAAkBJ,SAAlB,EACH,CAFD,EAGH,C,uDACD,kBAAU,CACN,KAAKJ,KAAL,CAAa,KAAb,CACA,KAAKH,MAAL,GACH,C,wCACD,kCAAyBY,KAAzB,CAAgC,CAC5B,GAAMC,IAAG,CAAG,EAAZ,CACA,QAASC,gBAAT,CAAyBC,KAAzB,CAAgC,CAC5B,GAAIA,KAAK,EAAI,IAAb,CAAmB,CAElB,CAFD,IAGK,IAAIA,KAAK,WAAYC,sBAArB,CAAmC,CACpCH,GAAG,CAACI,IAAJ,CAASF,KAAT,EACH,CAFI,IAGA,IAAIG,KAAK,CAACC,OAAN,CAAcJ,KAAd,CAAJ,CAA0B,CAC3BA,KAAK,CAACN,OAAN,CAAc,SAACW,CAAD,QAAON,gBAAe,CAACM,CAAD,CAAtB,EAAd,EACH,CAFI,IAGA,IAAI,MAAOL,MAAP,GAAiB,QAArB,CAA+B,CAChCM,MAAM,CAACC,IAAP,CAAYP,KAAZ,EAAmBN,OAAnB,CAA2B,SAACc,GAAD,CAAS,CAChCT,eAAe,CAACC,KAAK,CAACQ,GAAD,CAAN,CAAf,CACH,CAFD,EAGH,CACJ,CACDT,eAAe,CAACF,KAAD,CAAf,CACA,MAAOC,IAAP,CACH,C,6CAELf,MAAM,CAACO,SAAP,CAAmB,CAAnB"},"metadata":{},"sourceType":"script"}