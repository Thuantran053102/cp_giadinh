{"ast":null,"code":"Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=decayAnimation;var _base=require(\"../base\");var VELOCITY_EPS=5;function decay(clock,state,config){var lastTime=(0,_base.cond)(state.time,state.time,clock);var deltaTime=(0,_base.sub)(clock,lastTime);var kv=(0,_base.pow)(config.deceleration,deltaTime);var kx=(0,_base.divide)((0,_base.multiply)(config.deceleration,(0,_base.sub)(1,kv)),(0,_base.sub)(1,config.deceleration));var v0=(0,_base.divide)(state.velocity,1000);var v=(0,_base.multiply)(v0,kv,1000);var x=(0,_base.add)(state.position,(0,_base.multiply)(v0,kx));return(0,_base.block)([(0,_base.set)(state.position,x),(0,_base.set)(state.velocity,v),(0,_base.set)(state.time,clock),(0,_base.cond)((0,_base.lessThan)((0,_base.abs)(v),VELOCITY_EPS),(0,_base.set)(state.finished,1))]);}var procDecay=(0,_base.proc)(function(clock,time,velocity,position,finished,deceleration){return decay(clock,{time:time,velocity:velocity,position:position,finished:finished},{deceleration:deceleration});});function decayAnimation(clock,_ref,_ref2){var time=_ref.time,velocity=_ref.velocity,position=_ref.position,finished=_ref.finished;var deceleration=_ref2.deceleration;return procDecay(clock,time,velocity,position,finished,deceleration);}","map":{"version":3,"names":["VELOCITY_EPS","decay","clock","state","config","lastTime","cond","time","deltaTime","sub","kv","pow","deceleration","kx","divide","multiply","v0","velocity","v","x","add","position","block","set","lessThan","abs","finished","procDecay","proc","decayAnimation"],"sources":["D:/React_Native/SourceCode_VPM_Swine/node_modules/react-native-reanimated/lib/reanimated1/animations/decay.js"],"sourcesContent":["import {\n  cond,\n  sub,\n  pow,\n  divide,\n  multiply,\n  add,\n  block,\n  set,\n  lessThan,\n  proc,\n  abs,\n} from '../base';\n\nconst VELOCITY_EPS = 5;\n\nfunction decay(clock, state, config) {\n  const lastTime = cond(state.time, state.time, clock);\n  const deltaTime = sub(clock, lastTime);\n\n  // v0 = v / 1000\n  // v = v0 * powf(deceleration, dt);\n  // v = v * 1000;\n\n  // x0 = x;\n  // x = x0 + v0 * deceleration * (1 - powf(deceleration, dt)) / (1 - deceleration)\n  const kv = pow(config.deceleration, deltaTime);\n  const kx = divide(\n    multiply(config.deceleration, sub(1, kv)),\n    sub(1, config.deceleration)\n  );\n  const v0 = divide(state.velocity, 1000);\n  const v = multiply(v0, kv, 1000);\n  const x = add(state.position, multiply(v0, kx));\n  return block([\n    set(state.position, x),\n    set(state.velocity, v),\n    set(state.time, clock),\n    cond(lessThan(abs(v), VELOCITY_EPS), set(state.finished, 1)),\n  ]);\n}\n\nconst procDecay = proc(\n  (clock, time, velocity, position, finished, deceleration) =>\n    decay(clock, { time, velocity, position, finished }, { deceleration })\n);\n\nexport default function decayAnimation(\n  clock,\n  { time, velocity, position, finished },\n  { deceleration }\n) {\n  return procDecay(clock, time, velocity, position, finished, deceleration);\n}\n"],"mappings":"wFAAA,6BAcA,GAAMA,aAAY,CAAG,CAArB,CAEA,QAASC,MAAT,CAAeC,KAAf,CAAsBC,KAAtB,CAA6BC,MAA7B,CAAqC,CACnC,GAAMC,SAAQ,CAAG,GAAAC,UAAA,EAAKH,KAAK,CAACI,IAAX,CAAiBJ,KAAK,CAACI,IAAvB,CAA6BL,KAA7B,CAAjB,CACA,GAAMM,UAAS,CAAG,GAAAC,SAAA,EAAIP,KAAJ,CAAWG,QAAX,CAAlB,CAQA,GAAMK,GAAE,CAAG,GAAAC,SAAA,EAAIP,MAAM,CAACQ,YAAX,CAAyBJ,SAAzB,CAAX,CACA,GAAMK,GAAE,CAAG,GAAAC,YAAA,EACT,GAAAC,cAAA,EAASX,MAAM,CAACQ,YAAhB,CAA8B,GAAAH,SAAA,EAAI,CAAJ,CAAOC,EAAP,CAA9B,CADS,CAET,GAAAD,SAAA,EAAI,CAAJ,CAAOL,MAAM,CAACQ,YAAd,CAFS,CAAX,CAIA,GAAMI,GAAE,CAAG,GAAAF,YAAA,EAAOX,KAAK,CAACc,QAAb,CAAuB,IAAvB,CAAX,CACA,GAAMC,EAAC,CAAG,GAAAH,cAAA,EAASC,EAAT,CAAaN,EAAb,CAAiB,IAAjB,CAAV,CACA,GAAMS,EAAC,CAAG,GAAAC,SAAA,EAAIjB,KAAK,CAACkB,QAAV,CAAoB,GAAAN,cAAA,EAASC,EAAT,CAAaH,EAAb,CAApB,CAAV,CACA,MAAO,GAAAS,WAAA,EAAM,CACX,GAAAC,SAAA,EAAIpB,KAAK,CAACkB,QAAV,CAAoBF,CAApB,CADW,CAEX,GAAAI,SAAA,EAAIpB,KAAK,CAACc,QAAV,CAAoBC,CAApB,CAFW,CAGX,GAAAK,SAAA,EAAIpB,KAAK,CAACI,IAAV,CAAgBL,KAAhB,CAHW,CAIX,GAAAI,UAAA,EAAK,GAAAkB,cAAA,EAAS,GAAAC,SAAA,EAAIP,CAAJ,CAAT,CAAiBlB,YAAjB,CAAL,CAAqC,GAAAuB,SAAA,EAAIpB,KAAK,CAACuB,QAAV,CAAoB,CAApB,CAArC,CAJW,CAAN,CAAP,CAMD,CAED,GAAMC,UAAS,CAAG,GAAAC,UAAA,EAChB,SAAC1B,KAAD,CAAQK,IAAR,CAAcU,QAAd,CAAwBI,QAAxB,CAAkCK,QAAlC,CAA4Cd,YAA5C,QACEX,MAAK,CAACC,KAAD,CAAQ,CAAEK,IAAI,CAAJA,IAAF,CAAQU,QAAQ,CAARA,QAAR,CAAkBI,QAAQ,CAARA,QAAlB,CAA4BK,QAAQ,CAARA,QAA5B,CAAR,CAAgD,CAAEd,YAAY,CAAZA,YAAF,CAAhD,CADP,EADgB,CAAlB,CAKe,QAASiB,eAAT,CACb3B,KADa,YAIb,IAFEK,KAEF,MAFEA,IAEF,CAFQU,QAER,MAFQA,QAER,CAFkBI,QAElB,MAFkBA,QAElB,CAF4BK,QAE5B,MAF4BA,QAE5B,IADEd,aACF,OADEA,YACF,CACA,MAAOe,UAAS,CAACzB,KAAD,CAAQK,IAAR,CAAcU,QAAd,CAAwBI,QAAxB,CAAkCK,QAAlC,CAA4Cd,YAA5C,CAAhB,CACD"},"metadata":{},"sourceType":"script"}