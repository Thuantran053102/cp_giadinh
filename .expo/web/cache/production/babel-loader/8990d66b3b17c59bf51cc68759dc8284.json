{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.AnimatedParam=void 0;exports.createAnimatedParam=createAnimatedParam;var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _invariant=_interopRequireDefault(require(\"invariant\"));var _AnimatedNode2=_interopRequireWildcard(require(\"./AnimatedNode\"));var _AnimatedClock=_interopRequireDefault(require(\"./AnimatedClock\"));var _val=require(\"../val\");function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!==\"function\")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!==\"object\"&&typeof obj!==\"function\"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!==\"default\"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}var AnimatedParam=function(_AnimatedNode){(0,_inherits2.default)(AnimatedParam,_AnimatedNode);var _super=_createSuper(AnimatedParam);function AnimatedParam(){var _this;(0,_classCallCheck2.default)(this,AnimatedParam);_this=_super.call(this,{type:'param'},[]);_this.argsStack=[];_this.__attach();return _this;}(0,_createClass2.default)(AnimatedParam,[{key:\"beginContext\",value:function beginContext(ref,prevCallID){this._prevCallID=prevCallID;this.argsStack.push(ref);}},{key:\"endContext\",value:function endContext(){this.argsStack.pop();}},{key:\"_getTopNode\",value:function _getTopNode(){if(this.argsStack.length===0)throw new Error(\"param: Invocation failed because argsStack is empty\");var top=this.argsStack[this.argsStack.length-1];return top;}},{key:\"setValue\",value:function setValue(value){var top=this._getTopNode();if(top.setValue){var callID=(0,_AnimatedNode2.getCallID)();(0,_AnimatedNode2.setCallID)(this._prevCallID);top.setValue(value);(0,_AnimatedNode2.setCallID)(callID);}else{throw new Error(\"param: setValue(\"+value+\") failed because the top element has no known method for updating it's current value.\");}}},{key:\"__onEvaluate\",value:function __onEvaluate(){var callID=(0,_AnimatedNode2.getCallID)();(0,_AnimatedNode2.setCallID)(this._prevCallID);var top=this._getTopNode();var value=(0,_val.val)(top);(0,_AnimatedNode2.setCallID)(callID);return value;}},{key:\"start\",value:function start(){var node=this._getTopNode();(0,_invariant.default)(node instanceof _AnimatedClock.default||node instanceof AnimatedParam,\"param: top node should be of type AnimatedClock but got \"+node);node.start();}},{key:\"stop\",value:function stop(){var node=this._getTopNode();(0,_invariant.default)(node instanceof _AnimatedClock.default||node instanceof AnimatedParam,\"param: top node should be of type AnimatedClock but got \"+node);node.stop();}},{key:\"isRunning\",value:function isRunning(){var node=this._getTopNode();if(node instanceof AnimatedParam){return node.isRunning();}(0,_invariant.default)(node instanceof _AnimatedClock.default,\"param: top node should be of type AnimatedClock but got \"+node);return node.isStarted();}}]);return AnimatedParam;}(_AnimatedNode2.default);exports.AnimatedParam=AnimatedParam;function createAnimatedParam(){return new AnimatedParam();}","map":{"version":3,"names":["AnimatedParam","type","argsStack","__attach","ref","prevCallID","_prevCallID","push","pop","length","Error","top","value","_getTopNode","setValue","callID","getCallID","setCallID","val","node","invariant","AnimatedClock","start","stop","isRunning","isStarted","AnimatedNode","createAnimatedParam"],"sources":["D:/React_Native/SourceCode_VPM_Swine/node_modules/react-native-reanimated/lib/reanimated1/core/AnimatedParam.js"],"sourcesContent":["import invariant from 'invariant';\nimport AnimatedNode, { getCallID, setCallID } from './AnimatedNode';\nimport AnimatedClock from './AnimatedClock';\nimport { val } from '../val';\n\nexport class AnimatedParam extends AnimatedNode {\n  argsStack = [];\n  _prevCallID;\n\n  constructor() {\n    super({ type: 'param' }, []);\n    this.__attach();\n  }\n\n  beginContext(ref, prevCallID) {\n    this._prevCallID = prevCallID;\n    this.argsStack.push(ref);\n  }\n\n  endContext() {\n    this.argsStack.pop();\n  }\n\n  _getTopNode() {\n    if (this.argsStack.length === 0)\n      throw new Error(`param: Invocation failed because argsStack is empty`);\n    const top = this.argsStack[this.argsStack.length - 1];\n    return top;\n  }\n\n  setValue(value) {\n    const top = this._getTopNode();\n    if (top.setValue) {\n      const callID = getCallID();\n      setCallID(this._prevCallID);\n      top.setValue(value);\n      setCallID(callID);\n    } else {\n      throw new Error(\n        `param: setValue(${value}) failed because the top element has no known method for updating it's current value.`\n      );\n    }\n  }\n\n  __onEvaluate() {\n    const callID = getCallID();\n    setCallID(this._prevCallID);\n    const top = this._getTopNode();\n    const value = val(top);\n    setCallID(callID);\n    return value;\n  }\n\n  start() {\n    const node = this._getTopNode();\n    invariant(\n      node instanceof AnimatedClock || node instanceof AnimatedParam,\n      `param: top node should be of type AnimatedClock but got ${node}`\n    );\n    node.start();\n  }\n\n  stop() {\n    const node = this._getTopNode();\n    invariant(\n      node instanceof AnimatedClock || node instanceof AnimatedParam,\n      `param: top node should be of type AnimatedClock but got ${node}`\n    );\n    node.stop();\n  }\n\n  isRunning() {\n    const node = this._getTopNode();\n\n    if (node instanceof AnimatedParam) {\n      return node.isRunning();\n    }\n    invariant(\n      node instanceof AnimatedClock,\n      `param: top node should be of type AnimatedClock but got ${node}`\n    );\n    return node.isStarted();\n  }\n}\n\nexport function createAnimatedParam() {\n  return new AnimatedParam();\n}\n"],"mappings":"mrBAAA,4DACA,sEACA,sEACA,2B,qtDAEaA,c,oHAIX,wBAAc,4DACZ,uBAAM,CAAEC,IAAI,CAAE,OAAR,CAAN,CAAyB,EAAzB,EADY,MAHdC,SAGc,CAHF,EAGE,CAEZ,MAAKC,QAAL,GAFY,aAGb,C,mEAED,sBAAaC,GAAb,CAAkBC,UAAlB,CAA8B,CAC5B,KAAKC,WAAL,CAAmBD,UAAnB,CACA,KAAKH,SAAL,CAAeK,IAAf,CAAoBH,GAApB,EACD,C,0BAED,qBAAa,CACX,KAAKF,SAAL,CAAeM,GAAf,GACD,C,2BAED,sBAAc,CACZ,GAAI,KAAKN,SAAL,CAAeO,MAAf,GAA0B,CAA9B,CACE,KAAM,IAAIC,MAAJ,uDAAN,CACF,GAAMC,IAAG,CAAG,KAAKT,SAAL,CAAe,KAAKA,SAAL,CAAeO,MAAf,CAAwB,CAAvC,CAAZ,CACA,MAAOE,IAAP,CACD,C,wBAED,kBAASC,KAAT,CAAgB,CACd,GAAMD,IAAG,CAAG,KAAKE,WAAL,EAAZ,CACA,GAAIF,GAAG,CAACG,QAAR,CAAkB,CAChB,GAAMC,OAAM,CAAG,GAAAC,wBAAA,GAAf,CACA,GAAAC,wBAAA,EAAU,KAAKX,WAAf,EACAK,GAAG,CAACG,QAAJ,CAAaF,KAAb,EACA,GAAAK,wBAAA,EAAUF,MAAV,EACD,CALD,IAKO,CACL,KAAM,IAAIL,MAAJ,oBACeE,KADf,yFAAN,CAGD,CACF,C,4BAED,uBAAe,CACb,GAAMG,OAAM,CAAG,GAAAC,wBAAA,GAAf,CACA,GAAAC,wBAAA,EAAU,KAAKX,WAAf,EACA,GAAMK,IAAG,CAAG,KAAKE,WAAL,EAAZ,CACA,GAAMD,MAAK,CAAG,GAAAM,QAAA,EAAIP,GAAJ,CAAd,CACA,GAAAM,wBAAA,EAAUF,MAAV,EACA,MAAOH,MAAP,CACD,C,qBAED,gBAAQ,CACN,GAAMO,KAAI,CAAG,KAAKN,WAAL,EAAb,CACA,GAAAO,kBAAA,EACED,IAAI,WAAYE,uBAAhB,EAAiCF,IAAI,WAAYnB,cADnD,4DAE6DmB,IAF7D,EAIAA,IAAI,CAACG,KAAL,GACD,C,oBAED,eAAO,CACL,GAAMH,KAAI,CAAG,KAAKN,WAAL,EAAb,CACA,GAAAO,kBAAA,EACED,IAAI,WAAYE,uBAAhB,EAAiCF,IAAI,WAAYnB,cADnD,4DAE6DmB,IAF7D,EAIAA,IAAI,CAACI,IAAL,GACD,C,yBAED,oBAAY,CACV,GAAMJ,KAAI,CAAG,KAAKN,WAAL,EAAb,CAEA,GAAIM,IAAI,WAAYnB,cAApB,CAAmC,CACjC,MAAOmB,KAAI,CAACK,SAAL,EAAP,CACD,CACD,GAAAJ,kBAAA,EACED,IAAI,WAAYE,uBADlB,4DAE6DF,IAF7D,EAIA,MAAOA,KAAI,CAACM,SAAL,EAAP,CACD,C,2BA7EgCC,sB,sCAgF5B,QAASC,oBAAT,EAA+B,CACpC,MAAO,IAAI3B,cAAJ,EAAP,CACD"},"metadata":{},"sourceType":"script"}