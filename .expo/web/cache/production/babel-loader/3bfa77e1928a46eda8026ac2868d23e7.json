{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _toConsumableArray2=_interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _assertThisInitialized2=_interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _MapperRegistry=_interopRequireDefault(require(\"./MapperRegistry\"));var _MutableValue=_interopRequireDefault(require(\"./MutableValue\"));var _Mapper=_interopRequireDefault(require(\"./Mapper\"));var _NativeReanimated2=require(\"../NativeReanimated/NativeReanimated\");function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}var JSReanimated=function(_NativeReanimated){(0,_inherits2.default)(JSReanimated,_NativeReanimated);var _super=_createSuper(JSReanimated);function JSReanimated(){var _this;(0,_classCallCheck2.default)(this,JSReanimated);_this=_super.call(this,false);_this._valueSetter=undefined;_this._renderRequested=false;_this._mapperRegistry=new _MapperRegistry.default((0,_assertThisInitialized2.default)(_this));_this._frames=[];if(process.env.JEST_WORKER_ID){_this.timeProvider={now:function now(){return Date.now();}};}else{_this.timeProvider={now:function now(){return window.performance.now();}};}return _this;}(0,_createClass2.default)(JSReanimated,[{key:\"pushFrame\",value:function pushFrame(frame){this._frames.push(frame);this.maybeRequestRender();}},{key:\"getTimestamp\",value:function getTimestamp(){return this.timeProvider.now();}},{key:\"maybeRequestRender\",value:function maybeRequestRender(){var _this2=this;if(!this._renderRequested){this._renderRequested=true;requestAnimationFrame(function(_timestampMs){_this2._renderRequested=false;_this2._onRender(_this2.getTimestamp());});}}},{key:\"_onRender\",value:function _onRender(timestampMs){this._mapperRegistry.execute();var frames=(0,_toConsumableArray2.default)(this._frames);this._frames=[];for(var i=0,len=frames.length;i<len;++i){frames[i](timestampMs);}if(this._mapperRegistry.needRunOnRender){this._mapperRegistry.execute();}}},{key:\"installCoreFunctions\",value:function installCoreFunctions(valueSetter){this._valueSetter=valueSetter;}},{key:\"makeShareable\",value:function makeShareable(value){return value;}},{key:\"makeMutable\",value:function makeMutable(value){return new _MutableValue.default(value,this._valueSetter);}},{key:\"makeRemote\",value:function makeRemote(){var object=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return object;}},{key:\"startMapper\",value:function startMapper(mapper){var inputs=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var outputs=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var instance=new _Mapper.default(this,mapper,inputs,outputs);var mapperId=this._mapperRegistry.startMapper(instance);this.maybeRequestRender();return mapperId;}},{key:\"stopMapper\",value:function stopMapper(mapperId){this._mapperRegistry.stopMapper(mapperId);}},{key:\"registerEventHandler\",value:function registerEventHandler(_,__){return'';}},{key:\"unregisterEventHandler\",value:function unregisterEventHandler(_){}},{key:\"enableLayoutAnimations\",value:function enableLayoutAnimations(){console.warn('[Reanimated] enableLayoutAnimations is not available for WEB yet');}}]);return JSReanimated;}(_NativeReanimated2.NativeReanimated);exports.default=JSReanimated;","map":{"version":3,"names":["JSReanimated","_valueSetter","undefined","_renderRequested","_mapperRegistry","MapperRegistry","_frames","process","env","JEST_WORKER_ID","timeProvider","now","Date","window","performance","frame","push","maybeRequestRender","requestAnimationFrame","_timestampMs","_onRender","getTimestamp","timestampMs","execute","frames","i","len","length","needRunOnRender","valueSetter","value","MutableValue","object","mapper","inputs","outputs","instance","Mapper","mapperId","startMapper","stopMapper","_","__","console","warn","NativeReanimated"],"sources":["D:/React_Native/SourceCode_VPM_Swine/node_modules/react-native-reanimated/lib/reanimated2/js-reanimated/JSReanimated.js"],"sourcesContent":["import MapperRegistry from './MapperRegistry';\nimport MutableValue from './MutableValue';\nimport Mapper from './Mapper';\nimport { NativeReanimated } from '../NativeReanimated/NativeReanimated';\nexport default class JSReanimated extends NativeReanimated {\n    constructor() {\n        super(false);\n        this._valueSetter = undefined;\n        this._renderRequested = false;\n        this._mapperRegistry = new MapperRegistry(this);\n        this._frames = [];\n        if (process.env.JEST_WORKER_ID) {\n            this.timeProvider = { now: () => Date.now() };\n        }\n        else {\n            this.timeProvider = { now: () => window.performance.now() };\n        }\n    }\n    pushFrame(frame) {\n        this._frames.push(frame);\n        this.maybeRequestRender();\n    }\n    getTimestamp() {\n        return this.timeProvider.now();\n    }\n    maybeRequestRender() {\n        if (!this._renderRequested) {\n            this._renderRequested = true;\n            requestAnimationFrame((_timestampMs) => {\n                this._renderRequested = false;\n                this._onRender(this.getTimestamp());\n            });\n        }\n    }\n    _onRender(timestampMs) {\n        this._mapperRegistry.execute();\n        const frames = [...this._frames];\n        this._frames = [];\n        for (let i = 0, len = frames.length; i < len; ++i) {\n            frames[i](timestampMs);\n        }\n        if (this._mapperRegistry.needRunOnRender) {\n            this._mapperRegistry.execute();\n        }\n    }\n    installCoreFunctions(valueSetter) {\n        this._valueSetter = valueSetter;\n    }\n    makeShareable(value) {\n        return value;\n    }\n    makeMutable(value) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        return new MutableValue(value, this._valueSetter);\n    }\n    makeRemote(object = {}) {\n        return object;\n    }\n    startMapper(mapper, inputs = [], outputs = []) {\n        const instance = new Mapper(this, mapper, inputs, outputs);\n        const mapperId = this._mapperRegistry.startMapper(instance);\n        this.maybeRequestRender();\n        return mapperId;\n    }\n    stopMapper(mapperId) {\n        this._mapperRegistry.stopMapper(mapperId);\n    }\n    registerEventHandler(_, __) {\n        // noop\n        return '';\n    }\n    unregisterEventHandler(_) {\n        // noop\n    }\n    enableLayoutAnimations() {\n        console.warn('[Reanimated] enableLayoutAnimations is not available for WEB yet');\n    }\n}\n"],"mappings":"60BAAA,wEACA,oEACA,wDACA,uE,2tBACqBA,a,0HACjB,uBAAc,2DACV,uBAAM,KAAN,EACA,MAAKC,YAAL,CAAoBC,SAApB,CACA,MAAKC,gBAAL,CAAwB,KAAxB,CACA,MAAKC,eAAL,CAAuB,GAAIC,wBAAJ,4CAAvB,CACA,MAAKC,OAAL,CAAe,EAAf,CACA,GAAIC,OAAO,CAACC,GAAR,CAAYC,cAAhB,CAAgC,CAC5B,MAAKC,YAAL,CAAoB,CAAEC,GAAG,CAAE,qBAAMC,KAAI,CAACD,GAAL,EAAN,EAAP,CAApB,CACH,CAFD,IAGK,CACD,MAAKD,YAAL,CAAoB,CAAEC,GAAG,CAAE,qBAAME,OAAM,CAACC,WAAP,CAAmBH,GAAnB,EAAN,EAAP,CAApB,CACH,CAXS,aAYb,C,+DACD,mBAAUI,KAAV,CAAiB,CACb,KAAKT,OAAL,CAAaU,IAAb,CAAkBD,KAAlB,EACA,KAAKE,kBAAL,GACH,C,4BACD,uBAAe,CACX,MAAO,MAAKP,YAAL,CAAkBC,GAAlB,EAAP,CACH,C,kCACD,6BAAqB,iBACjB,GAAI,CAAC,KAAKR,gBAAV,CAA4B,CACxB,KAAKA,gBAAL,CAAwB,IAAxB,CACAe,qBAAqB,CAAC,SAACC,YAAD,CAAkB,CACpC,MAAI,CAAChB,gBAAL,CAAwB,KAAxB,CACA,MAAI,CAACiB,SAAL,CAAe,MAAI,CAACC,YAAL,EAAf,EACH,CAHoB,CAArB,CAIH,CACJ,C,yBACD,mBAAUC,WAAV,CAAuB,CACnB,KAAKlB,eAAL,CAAqBmB,OAArB,GACA,GAAMC,OAAM,iCAAO,KAAKlB,OAAZ,CAAZ,CACA,KAAKA,OAAL,CAAe,EAAf,CACA,IAAK,GAAImB,EAAC,CAAG,CAAR,CAAWC,GAAG,CAAGF,MAAM,CAACG,MAA7B,CAAqCF,CAAC,CAAGC,GAAzC,CAA8C,EAAED,CAAhD,CAAmD,CAC/CD,MAAM,CAACC,CAAD,CAAN,CAAUH,WAAV,EACH,CACD,GAAI,KAAKlB,eAAL,CAAqBwB,eAAzB,CAA0C,CACtC,KAAKxB,eAAL,CAAqBmB,OAArB,GACH,CACJ,C,oCACD,8BAAqBM,WAArB,CAAkC,CAC9B,KAAK5B,YAAL,CAAoB4B,WAApB,CACH,C,6BACD,uBAAcC,KAAd,CAAqB,CACjB,MAAOA,MAAP,CACH,C,2BACD,qBAAYA,KAAZ,CAAmB,CAEf,MAAO,IAAIC,sBAAJ,CAAiBD,KAAjB,CAAwB,KAAK7B,YAA7B,CAAP,CACH,C,0BACD,qBAAwB,IAAb+B,OAAa,2DAAJ,EAAI,CACpB,MAAOA,OAAP,CACH,C,2BACD,qBAAYC,MAAZ,CAA+C,IAA3BC,OAA2B,2DAAlB,EAAkB,IAAdC,QAAc,2DAAJ,EAAI,CAC3C,GAAMC,SAAQ,CAAG,GAAIC,gBAAJ,CAAW,IAAX,CAAiBJ,MAAjB,CAAyBC,MAAzB,CAAiCC,OAAjC,CAAjB,CACA,GAAMG,SAAQ,CAAG,KAAKlC,eAAL,CAAqBmC,WAArB,CAAiCH,QAAjC,CAAjB,CACA,KAAKnB,kBAAL,GACA,MAAOqB,SAAP,CACH,C,0BACD,oBAAWA,QAAX,CAAqB,CACjB,KAAKlC,eAAL,CAAqBoC,UAArB,CAAgCF,QAAhC,EACH,C,oCACD,8BAAqBG,CAArB,CAAwBC,EAAxB,CAA4B,CAExB,MAAO,EAAP,CACH,C,sCACD,gCAAuBD,CAAvB,CAA0B,CAEzB,C,sCACD,iCAAyB,CACrBE,OAAO,CAACC,IAAR,CAAa,kEAAb,EACH,C,0BAxEqCC,mC"},"metadata":{},"sourceType":"script"}