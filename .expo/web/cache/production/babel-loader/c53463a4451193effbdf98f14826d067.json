{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");var _extends2=_interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));var _core=require(\"../core\");var _styleAnimation=require(\"../animation/styleAnimation\");var _UpdateProps=require(\"../UpdateProps\");var _Colors=require(\"../Colors\");(0,_core.runOnUI)(function(){'worklet';var configs={};var enteringAnimationForTag={};global.LayoutAnimationRepository={configs:configs,registerConfig:function registerConfig(tag,config){configs[tag]=config;enteringAnimationForTag[tag]=null;},removeConfig:function removeConfig(tag){delete configs[tag];delete enteringAnimationForTag[tag];},startAnimationForTag:function startAnimationForTag(tag,type,yogaValues){if(configs[tag]==null){return;}var style=configs[tag][type](yogaValues);var currentAnimation=style.animations;if(type==='entering'){enteringAnimationForTag[tag]=style;}else if(type==='layout'&&enteringAnimationForTag[tag]!==null){var entryAniamtion=enteringAnimationForTag[tag].animations;var layoutAnimation=style.animations;currentAnimation={};for(var key in entryAniamtion){currentAnimation[key]=entryAniamtion[key];}for(var _key in layoutAnimation){currentAnimation[_key]=layoutAnimation[_key];}}var sv=configs[tag].sv;_stopObservingProgress(tag,false);_startObservingProgress(tag,sv);var backupColor={};for(var _key2 in style.initialValues){if(_UpdateProps.ColorProperties.includes(_key2)){var value=style.initialValues[_key2];backupColor[_key2]=value;style.initialValues[_key2]=(0,_Colors.processColor)(value);}}sv.value=(0,_extends2.default)({},sv._value,style.initialValues);_stopObservingProgress(tag,false);var animation=(0,_styleAnimation.withStyleAnimation)(currentAnimation);animation.callback=function(finished){if(finished){_stopObservingProgress(tag,finished);}style.callback&&style.callback(finished);};if(backupColor){configs[tag].sv._value=(0,_extends2.default)((0,_extends2.default)({},configs[tag].sv.value),backupColor);}configs[tag].sv.value=animation;_startObservingProgress(tag,sv);}};})();","map":{"version":3,"names":["runOnUI","configs","enteringAnimationForTag","global","LayoutAnimationRepository","registerConfig","tag","config","removeConfig","startAnimationForTag","type","yogaValues","style","currentAnimation","animations","entryAniamtion","layoutAnimation","key","sv","_stopObservingProgress","_startObservingProgress","backupColor","initialValues","ColorProperties","includes","value","processColor","_value","animation","withStyleAnimation","callback","finished"],"sources":["D:/React_Native/SourceCode_VPM_Swine/node_modules/react-native-reanimated/lib/reanimated2/layoutReanimation/LayoutAnimationRepository.js"],"sourcesContent":["/* global _stopObservingProgress, _startObservingProgress */\nimport { runOnUI } from '../core';\nimport { withStyleAnimation } from '../animation/styleAnimation';\nimport { ColorProperties } from '../UpdateProps';\nimport { processColor } from '../Colors';\nrunOnUI(() => {\n    'worklet';\n    const configs = {};\n    const enteringAnimationForTag = {};\n    global.LayoutAnimationRepository = {\n        configs,\n        registerConfig(tag, config) {\n            configs[tag] = config;\n            enteringAnimationForTag[tag] = null;\n        },\n        removeConfig(tag) {\n            delete configs[tag];\n            delete enteringAnimationForTag[tag];\n        },\n        startAnimationForTag(tag, type, yogaValues) {\n            if (configs[tag] == null) {\n                return; // :(\n            }\n            const style = configs[tag][type](yogaValues);\n            let currentAnimation = style.animations;\n            if (type === 'entering') {\n                enteringAnimationForTag[tag] = style;\n            }\n            else if (type === 'layout' && enteringAnimationForTag[tag] !== null) {\n                const entryAniamtion = enteringAnimationForTag[tag].animations;\n                const layoutAnimation = style.animations;\n                currentAnimation = {};\n                for (const key in entryAniamtion) {\n                    currentAnimation[key] = entryAniamtion[key];\n                }\n                for (const key in layoutAnimation) {\n                    currentAnimation[key] = layoutAnimation[key];\n                }\n            }\n            const sv = configs[tag].sv;\n            _stopObservingProgress(tag, false);\n            _startObservingProgress(tag, sv);\n            const backupColor = {};\n            for (const key in style.initialValues) {\n                if (ColorProperties.includes(key)) {\n                    const value = style.initialValues[key];\n                    backupColor[key] = value;\n                    style.initialValues[key] = processColor(value);\n                }\n            }\n            sv.value = Object.assign({}, sv._value, style.initialValues);\n            _stopObservingProgress(tag, false);\n            const animation = withStyleAnimation(currentAnimation);\n            animation.callback = (finished) => {\n                if (finished) {\n                    _stopObservingProgress(tag, finished);\n                }\n                style.callback && style.callback(finished);\n            };\n            if (backupColor) {\n                configs[tag].sv._value = Object.assign(Object.assign({}, configs[tag].sv.value), backupColor);\n            }\n            configs[tag].sv.value = animation;\n            _startObservingProgress(tag, sv);\n        },\n    };\n})();\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}