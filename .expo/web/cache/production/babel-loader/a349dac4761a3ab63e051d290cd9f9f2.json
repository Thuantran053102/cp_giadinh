{"ast":null,"code":"Object.defineProperty(exports,\"__esModule\",{value:true});exports.makeViewDescriptorsSet=makeViewDescriptorsSet;exports.makeViewsRefSet=makeViewsRefSet;var _react=require(\"react\");var _core=require(\"./core\");var _reactNative=require(\"react-native\");function _createForOfIteratorHelperLoose(o,allowArrayLike){var it=typeof Symbol!==\"undefined\"&&o[Symbol.iterator]||o[\"@@iterator\"];if(it)return(it=it.call(o)).next.bind(it);if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length===\"number\"){if(it)o=it;var i=0;return function(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};};}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(o);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}var scheduleUpdates=_reactNative.Platform.OS==='web'?requestAnimationFrame:setImmediate;function makeViewDescriptorsSet(){var ref=(0,_react.useRef)(null);if(ref.current===null){var data={batchToRemove:new Set(),tags:new Set(),waitForInsertSync:false,waitForRemoveSync:false,sharableViewDescriptors:(0,_core.makeMutable)([]),items:[],add:function add(item){if(data.tags.has(item.tag)){return;}data.tags.add(item.tag);data.items.push(item);if(!data.waitForInsertSync){data.waitForInsertSync=true;scheduleUpdates(function(){data.sharableViewDescriptors.value=data.items;data.waitForInsertSync=false;});}},remove:function remove(viewTag){data.batchToRemove.add(viewTag);if(!data.waitForRemoveSync){data.waitForRemoveSync=true;scheduleUpdates(function(){var items=[];for(var _iterator=_createForOfIteratorHelperLoose(data.items),_step;!(_step=_iterator()).done;){var item=_step.value;if(data.batchToRemove.has(item.tag)){data.tags.delete(item.tag);}else{items.push(item);}}data.items=items;data.sharableViewDescriptors.value=items;data.batchToRemove=new Set();data.waitForRemoveSync=false;});}},rebuildsharableViewDescriptors:function rebuildsharableViewDescriptors(sharableViewDescriptors){data.sharableViewDescriptors=sharableViewDescriptors;}};ref.current=data;}return ref.current;}function makeViewsRefSet(){var ref=(0,_react.useRef)(null);if(ref.current===null){var data={items:new Set(),add:function add(item){if(data.items.has(item))return;data.items.add(item);},remove:function remove(item){data.items.delete(item);}};ref.current=data;}return ref.current;}","map":{"version":3,"names":["scheduleUpdates","Platform","OS","requestAnimationFrame","setImmediate","makeViewDescriptorsSet","ref","useRef","current","data","batchToRemove","Set","tags","waitForInsertSync","waitForRemoveSync","sharableViewDescriptors","makeMutable","items","add","item","has","tag","push","value","remove","viewTag","delete","rebuildsharableViewDescriptors","makeViewsRefSet"],"sources":["D:/React_Native/SourceCode_VPM_Swine/node_modules/react-native-reanimated/lib/reanimated2/ViewDescriptorsSet.js"],"sourcesContent":["import { useRef } from 'react';\nimport { makeMutable } from './core';\nimport { Platform } from 'react-native';\nconst scheduleUpdates = Platform.OS === 'web' ? requestAnimationFrame : setImmediate;\nexport function makeViewDescriptorsSet() {\n    const ref = useRef(null);\n    if (ref.current === null) {\n        const data = {\n            batchToRemove: new Set(),\n            tags: new Set(),\n            waitForInsertSync: false,\n            waitForRemoveSync: false,\n            sharableViewDescriptors: makeMutable([]),\n            items: [],\n            add: (item) => {\n                if (data.tags.has(item.tag)) {\n                    return;\n                }\n                data.tags.add(item.tag);\n                data.items.push(item);\n                if (!data.waitForInsertSync) {\n                    data.waitForInsertSync = true;\n                    scheduleUpdates(() => {\n                        data.sharableViewDescriptors.value = data.items;\n                        data.waitForInsertSync = false;\n                    });\n                }\n            },\n            remove: (viewTag) => {\n                data.batchToRemove.add(viewTag);\n                if (!data.waitForRemoveSync) {\n                    data.waitForRemoveSync = true;\n                    scheduleUpdates(() => {\n                        const items = [];\n                        for (const item of data.items) {\n                            if (data.batchToRemove.has(item.tag)) {\n                                data.tags.delete(item.tag);\n                            }\n                            else {\n                                items.push(item);\n                            }\n                        }\n                        data.items = items;\n                        data.sharableViewDescriptors.value = items;\n                        data.batchToRemove = new Set();\n                        data.waitForRemoveSync = false;\n                    });\n                }\n            },\n            rebuildsharableViewDescriptors: (sharableViewDescriptors) => {\n                data.sharableViewDescriptors = sharableViewDescriptors;\n            },\n        };\n        ref.current = data;\n    }\n    return ref.current;\n}\nexport function makeViewsRefSet() {\n    const ref = useRef(null);\n    if (ref.current === null) {\n        const data = {\n            items: new Set(),\n            add: (item) => {\n                if (data.items.has(item))\n                    return;\n                data.items.add(item);\n            },\n            remove: (item) => {\n                data.items.delete(item);\n            },\n        };\n        ref.current = data;\n    }\n    return ref.current;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}