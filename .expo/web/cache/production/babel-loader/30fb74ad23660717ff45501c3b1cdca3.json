{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.createOrReuseTransformNode=createOrReuseTransformNode;var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _AnimatedNode2=_interopRequireDefault(require(\"./AnimatedNode\"));var _lodash=_interopRequireDefault(require(\"lodash.isequal\"));function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function sanitizeTransform(inputTransform){var outputTransform=[];var hasAnimatedTransform=false;inputTransform.forEach(function(transform){for(var key in transform){var value=transform[key];if(value instanceof _AnimatedNode2.default){hasAnimatedTransform=true;outputTransform.push({property:key,nodeID:value.__nodeID});}else{outputTransform.push({property:key,value:value});}}});return hasAnimatedTransform?outputTransform:undefined;}function extractAnimatedParentNodes(transform){var parents=[];transform.forEach(function(transform){for(var key in transform){var value=transform[key];if(value instanceof _AnimatedNode2.default){parents.push(value);}}});return parents;}function createOrReuseTransformNode(transform,oldNode){var config=sanitizeTransform(transform);if(config===undefined){return undefined;}if(oldNode&&(0,_lodash.default)(config,oldNode._config)){return oldNode;}return new AnimatedTransform(transform,config);}var AnimatedTransform=function(_AnimatedNode){(0,_inherits2.default)(AnimatedTransform,_AnimatedNode);var _super=_createSuper(AnimatedTransform);function AnimatedTransform(transform,config){var _this;(0,_classCallCheck2.default)(this,AnimatedTransform);_this=_super.call(this,{type:'transform',transform:config},extractAnimatedParentNodes(transform));_this._config=config;_this._transform=transform;return _this;}(0,_createClass2.default)(AnimatedTransform,[{key:\"toString\",value:function toString(){return\"AnimatedTransform, id: \"+this.__nodeID;}},{key:\"__onEvaluate\",value:function __onEvaluate(){return this._transform.map(function(transform){var result={};for(var key in transform){var value=transform[key];if(value instanceof _AnimatedNode2.default){result[key]=value.__getValue();}}return result;});}}]);return AnimatedTransform;}(_AnimatedNode2.default);","map":{"version":3,"names":["sanitizeTransform","inputTransform","outputTransform","hasAnimatedTransform","forEach","transform","key","value","AnimatedNode","push","property","nodeID","__nodeID","undefined","extractAnimatedParentNodes","parents","createOrReuseTransformNode","oldNode","config","deepEqual","_config","AnimatedTransform","type","_transform","map","result","__getValue"],"sources":["D:/React_Native/SourceCode_VPM_Swine/node_modules/react-native-reanimated/lib/reanimated1/core/AnimatedTransform.js"],"sourcesContent":["import AnimatedNode from './AnimatedNode';\n\nimport deepEqual from 'lodash.isequal';\n\nfunction sanitizeTransform(inputTransform) {\n  const outputTransform = [];\n  let hasAnimatedTransform = false;\n  inputTransform.forEach((transform) => {\n    for (const key in transform) {\n      const value = transform[key];\n      if (value instanceof AnimatedNode) {\n        hasAnimatedTransform = true;\n        outputTransform.push({\n          property: key,\n          nodeID: value.__nodeID,\n        });\n      } else {\n        outputTransform.push({\n          property: key,\n          value,\n        });\n      }\n    }\n  });\n  return hasAnimatedTransform ? outputTransform : undefined;\n}\n\nfunction extractAnimatedParentNodes(transform) {\n  const parents = [];\n  transform.forEach((transform) => {\n    for (const key in transform) {\n      const value = transform[key];\n      if (value instanceof AnimatedNode) {\n        parents.push(value);\n      }\n    }\n  });\n  return parents;\n}\n\nexport function createOrReuseTransformNode(transform, oldNode) {\n  const config = sanitizeTransform(transform);\n  if (config === undefined) {\n    return undefined;\n  }\n  if (oldNode && deepEqual(config, oldNode._config)) {\n    return oldNode;\n  }\n  return new AnimatedTransform(transform, config);\n}\n\nclass AnimatedTransform extends AnimatedNode {\n  constructor(transform, config) {\n    super(\n      { type: 'transform', transform: config },\n      extractAnimatedParentNodes(transform)\n    );\n    this._config = config;\n    this._transform = transform;\n  }\n\n  toString() {\n    return `AnimatedTransform, id: ${this.__nodeID}`;\n  }\n\n  __onEvaluate() {\n    return this._transform.map((transform) => {\n      const result = {};\n      for (const key in transform) {\n        const value = transform[key];\n        if (value instanceof AnimatedNode) {\n          result[key] = value.__getValue();\n        }\n      }\n      return result;\n    });\n  }\n}\n"],"mappings":"oqBAAA,qEAEA,8D,wtBAEA,QAASA,kBAAT,CAA2BC,cAA3B,CAA2C,CACzC,GAAMC,gBAAe,CAAG,EAAxB,CACA,GAAIC,qBAAoB,CAAG,KAA3B,CACAF,cAAc,CAACG,OAAf,CAAuB,SAACC,SAAD,CAAe,CACpC,IAAK,GAAMC,IAAX,GAAkBD,UAAlB,CAA6B,CAC3B,GAAME,MAAK,CAAGF,SAAS,CAACC,GAAD,CAAvB,CACA,GAAIC,KAAK,WAAYC,uBAArB,CAAmC,CACjCL,oBAAoB,CAAG,IAAvB,CACAD,eAAe,CAACO,IAAhB,CAAqB,CACnBC,QAAQ,CAAEJ,GADS,CAEnBK,MAAM,CAAEJ,KAAK,CAACK,QAFK,CAArB,EAID,CAND,IAMO,CACLV,eAAe,CAACO,IAAhB,CAAqB,CACnBC,QAAQ,CAAEJ,GADS,CAEnBC,KAAK,CAALA,KAFmB,CAArB,EAID,CACF,CACF,CAhBD,EAiBA,MAAOJ,qBAAoB,CAAGD,eAAH,CAAqBW,SAAhD,CACD,CAED,QAASC,2BAAT,CAAoCT,SAApC,CAA+C,CAC7C,GAAMU,QAAO,CAAG,EAAhB,CACAV,SAAS,CAACD,OAAV,CAAkB,SAACC,SAAD,CAAe,CAC/B,IAAK,GAAMC,IAAX,GAAkBD,UAAlB,CAA6B,CAC3B,GAAME,MAAK,CAAGF,SAAS,CAACC,GAAD,CAAvB,CACA,GAAIC,KAAK,WAAYC,uBAArB,CAAmC,CACjCO,OAAO,CAACN,IAAR,CAAaF,KAAb,EACD,CACF,CACF,CAPD,EAQA,MAAOQ,QAAP,CACD,CAEM,QAASC,2BAAT,CAAoCX,SAApC,CAA+CY,OAA/C,CAAwD,CAC7D,GAAMC,OAAM,CAAGlB,iBAAiB,CAACK,SAAD,CAAhC,CACA,GAAIa,MAAM,GAAKL,SAAf,CAA0B,CACxB,MAAOA,UAAP,CACD,CACD,GAAII,OAAO,EAAI,GAAAE,eAAA,EAAUD,MAAV,CAAkBD,OAAO,CAACG,OAA1B,CAAf,CAAmD,CACjD,MAAOH,QAAP,CACD,CACD,MAAO,IAAII,kBAAJ,CAAsBhB,SAAtB,CAAiCa,MAAjC,CAAP,CACD,C,GAEKG,kB,4HACJ,2BAAYhB,SAAZ,CAAuBa,MAAvB,CAA+B,gEAC7B,uBACE,CAAEI,IAAI,CAAE,WAAR,CAAqBjB,SAAS,CAAEa,MAAhC,CADF,CAEEJ,0BAA0B,CAACT,SAAD,CAF5B,EAIA,MAAKe,OAAL,CAAeF,MAAf,CACA,MAAKK,UAAL,CAAkBlB,SAAlB,CAN6B,aAO9B,C,mEAED,mBAAW,CACT,gCAAiC,KAAKO,QAAtC,CACD,C,4BAED,uBAAe,CACb,MAAO,MAAKW,UAAL,CAAgBC,GAAhB,CAAoB,SAACnB,SAAD,CAAe,CACxC,GAAMoB,OAAM,CAAG,EAAf,CACA,IAAK,GAAMnB,IAAX,GAAkBD,UAAlB,CAA6B,CAC3B,GAAME,MAAK,CAAGF,SAAS,CAACC,GAAD,CAAvB,CACA,GAAIC,KAAK,WAAYC,uBAArB,CAAmC,CACjCiB,MAAM,CAACnB,GAAD,CAAN,CAAcC,KAAK,CAACmB,UAAN,EAAd,CACD,CACF,CACD,MAAOD,OAAP,CACD,CATM,CAAP,CAUD,C,+BAzB6BjB,sB"},"metadata":{},"sourceType":"script"}