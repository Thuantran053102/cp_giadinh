{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=scheduleNotificationAsync;exports.parseTrigger=parseTrigger;var _objectWithoutProperties2=_interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));var _regenerator=_interopRequireDefault(require(\"@babel/runtime/regenerator\"));var _expoModulesCore=require(\"expo-modules-core\");var _uuid=require(\"uuid\");var _NotificationScheduler=_interopRequireDefault(require(\"./NotificationScheduler\"));var _excluded=[\"repeats\"],_excluded2=[\"channelId\"],_excluded3=[\"channelId\"],_excluded4=[\"channelId\"],_excluded5=[\"channelId\"],_excluded6=[\"channelId\"];function scheduleNotificationAsync(request){var _request$identifier;return _regenerator.default.async(function scheduleNotificationAsync$(_context){while(1){switch(_context.prev=_context.next){case 0:if(_NotificationScheduler.default.scheduleNotificationAsync){_context.next=2;break;}throw new _expoModulesCore.UnavailabilityError('Notifications','scheduleNotificationAsync');case 2:_context.next=4;return _regenerator.default.awrap(_NotificationScheduler.default.scheduleNotificationAsync((_request$identifier=request.identifier)!=null?_request$identifier:(0,_uuid.v4)(),request.content,parseTrigger(request.trigger)));case 4:return _context.abrupt(\"return\",_context.sent);case 5:case\"end\":return _context.stop();}}},null,null,null,Promise);}var DAILY_TRIGGER_EXPECTED_DATE_COMPONENTS=['hour','minute'];var WEEKLY_TRIGGER_EXPECTED_DATE_COMPONENTS=['weekday','hour','minute'];var YEARLY_TRIGGER_EXPECTED_DATE_COMPONENTS=['day','month','hour','minute'];function parseTrigger(userFacingTrigger){if(userFacingTrigger===null){return null;}if(userFacingTrigger===undefined){throw new TypeError('Encountered an `undefined` notification trigger. If you want to trigger the notification immediately, pass in an explicit `null` value.');}if(isDateTrigger(userFacingTrigger)){return parseDateTrigger(userFacingTrigger);}else if(isDailyTriggerInput(userFacingTrigger)){validateDateComponentsInTrigger(userFacingTrigger,DAILY_TRIGGER_EXPECTED_DATE_COMPONENTS);return{type:'daily',channelId:userFacingTrigger.channelId,hour:userFacingTrigger.hour,minute:userFacingTrigger.minute};}else if(isWeeklyTriggerInput(userFacingTrigger)){validateDateComponentsInTrigger(userFacingTrigger,WEEKLY_TRIGGER_EXPECTED_DATE_COMPONENTS);return{type:'weekly',channelId:userFacingTrigger.channelId,weekday:userFacingTrigger.weekday,hour:userFacingTrigger.hour,minute:userFacingTrigger.minute};}else if(isYearlyTriggerInput(userFacingTrigger)){validateDateComponentsInTrigger(userFacingTrigger,YEARLY_TRIGGER_EXPECTED_DATE_COMPONENTS);return{type:'yearly',channelId:userFacingTrigger.channelId,day:userFacingTrigger.day,month:userFacingTrigger.month,hour:userFacingTrigger.hour,minute:userFacingTrigger.minute};}else if(isSecondsPropertyMisusedInCalendarTriggerInput(userFacingTrigger)){throw new TypeError('Could not have inferred the notification trigger type: if you want to use a time interval trigger, pass in only `seconds` with or without `repeats` property; if you want to use calendar-based trigger, pass in `second`.');}else if('seconds'in userFacingTrigger){var _userFacingTrigger$re;return{type:'timeInterval',channelId:userFacingTrigger.channelId,seconds:userFacingTrigger.seconds,repeats:(_userFacingTrigger$re=userFacingTrigger.repeats)!=null?_userFacingTrigger$re:false};}else if(isCalendarTrigger(userFacingTrigger)){var repeats=userFacingTrigger.repeats,calendarTrigger=(0,_objectWithoutProperties2.default)(userFacingTrigger,_excluded);return{type:'calendar',value:calendarTrigger,repeats:repeats};}else{return _expoModulesCore.Platform.select({default:null,android:{type:'channel',channelId:userFacingTrigger.channelId}});}}function isCalendarTrigger(trigger){var channelId=trigger.channelId,triggerWithoutChannelId=(0,_objectWithoutProperties2.default)(trigger,_excluded2);return Object.keys(triggerWithoutChannelId).length>0;}function isDateTrigger(trigger){return trigger instanceof Date||typeof trigger==='number'||typeof trigger==='object'&&'date'in trigger;}function parseDateTrigger(trigger){if(trigger instanceof Date||typeof trigger==='number'){return{type:'date',timestamp:toTimestamp(trigger)};}return{type:'date',timestamp:toTimestamp(trigger.date),channelId:trigger.channelId};}function toTimestamp(date){if(date instanceof Date){return date.getTime();}return date;}function isDailyTriggerInput(trigger){if(typeof trigger!=='object')return false;var channelId=trigger.channelId,triggerWithoutChannelId=(0,_objectWithoutProperties2.default)(trigger,_excluded3);return Object.keys(triggerWithoutChannelId).length===DAILY_TRIGGER_EXPECTED_DATE_COMPONENTS.length+1&&DAILY_TRIGGER_EXPECTED_DATE_COMPONENTS.every(function(component){return component in triggerWithoutChannelId;})&&'repeats'in triggerWithoutChannelId&&triggerWithoutChannelId.repeats===true;}function isWeeklyTriggerInput(trigger){if(typeof trigger!=='object')return false;var channelId=trigger.channelId,triggerWithoutChannelId=(0,_objectWithoutProperties2.default)(trigger,_excluded4);return Object.keys(triggerWithoutChannelId).length===WEEKLY_TRIGGER_EXPECTED_DATE_COMPONENTS.length+1&&WEEKLY_TRIGGER_EXPECTED_DATE_COMPONENTS.every(function(component){return component in triggerWithoutChannelId;})&&'repeats'in triggerWithoutChannelId&&triggerWithoutChannelId.repeats===true;}function isYearlyTriggerInput(trigger){if(typeof trigger!=='object')return false;var channelId=trigger.channelId,triggerWithoutChannelId=(0,_objectWithoutProperties2.default)(trigger,_excluded5);return Object.keys(triggerWithoutChannelId).length===YEARLY_TRIGGER_EXPECTED_DATE_COMPONENTS.length+1&&YEARLY_TRIGGER_EXPECTED_DATE_COMPONENTS.every(function(component){return component in triggerWithoutChannelId;})&&'repeats'in triggerWithoutChannelId&&triggerWithoutChannelId.repeats===true;}function isSecondsPropertyMisusedInCalendarTriggerInput(trigger){var channelId=trigger.channelId,triggerWithoutChannelId=(0,_objectWithoutProperties2.default)(trigger,_excluded6);return'seconds'in triggerWithoutChannelId&&'repeats'in triggerWithoutChannelId&&Object.keys(triggerWithoutChannelId).length>2||'seconds'in triggerWithoutChannelId&&!('repeats'in triggerWithoutChannelId)&&Object.keys(triggerWithoutChannelId).length>1;}function validateDateComponentsInTrigger(trigger,components){var anyTriggerType=trigger;components.forEach(function(component){if(!(component in anyTriggerType)){throw new TypeError(\"The \"+component+\" parameter needs to be present\");}if(typeof anyTriggerType[component]!=='number'){throw new TypeError(\"The \"+component+\" parameter should be a number\");}switch(component){case'month':{var month=anyTriggerType.month;if(month<0||month>11){throw new RangeError(\"The month parameter needs to be between 0 and 11. Found: \"+month);}break;}case'day':{var day=anyTriggerType.day,_month=anyTriggerType.month;var daysInGivenMonth=daysInMonth(_month);if(day<1||day>daysInGivenMonth){throw new RangeError(\"The day parameter for month \"+_month+\" must be between 1 and \"+daysInGivenMonth+\". Found: \"+day);}break;}case'weekday':{var weekday=anyTriggerType.weekday;if(weekday<1||weekday>7){throw new RangeError(\"The weekday parameter needs to be between 1 and 7. Found: \"+weekday);}break;}case'hour':{var hour=anyTriggerType.hour;if(hour<0||hour>23){throw new RangeError(\"The hour parameter needs to be between 0 and 23. Found: \"+hour);}break;}case'minute':{var minute=anyTriggerType.minute;if(minute<0||minute>59){throw new RangeError(\"The minute parameter needs to be between 0 and 59. Found: \"+minute);}break;}}});}function daysInMonth(){var month=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var year=arguments.length>1?arguments[1]:undefined;return new Date(year!=null?year:2000,month+1,0).getDate();}","map":{"version":3,"sources":["../src/scheduleNotificationAsync.ts"],"names":[],"mappings":"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","sourcesContent":["import { Platform, UnavailabilityError } from 'expo-modules-core';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport NotificationScheduler from './NotificationScheduler';\nimport { NotificationTriggerInput as NativeNotificationTriggerInput } from './NotificationScheduler.types';\nimport {\n  NotificationRequestInput,\n  NotificationTriggerInput,\n  DailyTriggerInput,\n  WeeklyTriggerInput,\n  YearlyTriggerInput,\n  CalendarTriggerInput,\n  TimeIntervalTriggerInput,\n  DateTriggerInput,\n  ChannelAwareTriggerInput,\n  SchedulableNotificationTriggerInput,\n} from './Notifications.types';\n\nexport default async function scheduleNotificationAsync(\n  request: NotificationRequestInput\n): Promise<string> {\n  if (!NotificationScheduler.scheduleNotificationAsync) {\n    throw new UnavailabilityError('Notifications', 'scheduleNotificationAsync');\n  }\n\n  return await NotificationScheduler.scheduleNotificationAsync(\n    request.identifier ?? uuidv4(),\n    request.content,\n    parseTrigger(request.trigger)\n  );\n}\n\ntype ValidTriggerDateComponents = 'month' | 'day' | 'weekday' | 'hour' | 'minute';\n\nconst DAILY_TRIGGER_EXPECTED_DATE_COMPONENTS: readonly ValidTriggerDateComponents[] = [\n  'hour',\n  'minute',\n];\nconst WEEKLY_TRIGGER_EXPECTED_DATE_COMPONENTS: readonly ValidTriggerDateComponents[] = [\n  'weekday',\n  'hour',\n  'minute',\n];\nconst YEARLY_TRIGGER_EXPECTED_DATE_COMPONENTS: readonly ValidTriggerDateComponents[] = [\n  'day',\n  'month',\n  'hour',\n  'minute',\n];\n\nexport function parseTrigger(\n  userFacingTrigger: NotificationTriggerInput\n): NativeNotificationTriggerInput {\n  if (userFacingTrigger === null) {\n    return null;\n  }\n\n  if (userFacingTrigger === undefined) {\n    throw new TypeError(\n      'Encountered an `undefined` notification trigger. If you want to trigger the notification immediately, pass in an explicit `null` value.'\n    );\n  }\n\n  if (isDateTrigger(userFacingTrigger)) {\n    return parseDateTrigger(userFacingTrigger);\n  } else if (isDailyTriggerInput(userFacingTrigger)) {\n    validateDateComponentsInTrigger(userFacingTrigger, DAILY_TRIGGER_EXPECTED_DATE_COMPONENTS);\n    return {\n      type: 'daily',\n      channelId: userFacingTrigger.channelId,\n      hour: userFacingTrigger.hour,\n      minute: userFacingTrigger.minute,\n    };\n  } else if (isWeeklyTriggerInput(userFacingTrigger)) {\n    validateDateComponentsInTrigger(userFacingTrigger, WEEKLY_TRIGGER_EXPECTED_DATE_COMPONENTS);\n    return {\n      type: 'weekly',\n      channelId: userFacingTrigger.channelId,\n      weekday: userFacingTrigger.weekday,\n      hour: userFacingTrigger.hour,\n      minute: userFacingTrigger.minute,\n    };\n  } else if (isYearlyTriggerInput(userFacingTrigger)) {\n    validateDateComponentsInTrigger(userFacingTrigger, YEARLY_TRIGGER_EXPECTED_DATE_COMPONENTS);\n    return {\n      type: 'yearly',\n      channelId: userFacingTrigger.channelId,\n      day: userFacingTrigger.day,\n      month: userFacingTrigger.month,\n      hour: userFacingTrigger.hour,\n      minute: userFacingTrigger.minute,\n    };\n  } else if (isSecondsPropertyMisusedInCalendarTriggerInput(userFacingTrigger)) {\n    throw new TypeError(\n      'Could not have inferred the notification trigger type: if you want to use a time interval trigger, pass in only `seconds` with or without `repeats` property; if you want to use calendar-based trigger, pass in `second`.'\n    );\n  } else if ('seconds' in userFacingTrigger) {\n    return {\n      type: 'timeInterval',\n      channelId: userFacingTrigger.channelId,\n      seconds: userFacingTrigger.seconds,\n      repeats: userFacingTrigger.repeats ?? false,\n    };\n  } else if (isCalendarTrigger(userFacingTrigger)) {\n    const { repeats, ...calendarTrigger } = userFacingTrigger;\n    return { type: 'calendar', value: calendarTrigger, repeats };\n  } else {\n    return Platform.select({\n      default: null, // There's no notion of channels on platforms other than Android.\n      android: { type: 'channel', channelId: userFacingTrigger.channelId },\n    });\n  }\n}\n\nfunction isCalendarTrigger(\n  trigger: CalendarTriggerInput | ChannelAwareTriggerInput\n): trigger is CalendarTriggerInput {\n  const { channelId, ...triggerWithoutChannelId } = trigger;\n  return Object.keys(triggerWithoutChannelId).length > 0;\n}\n\nfunction isDateTrigger(\n  trigger:\n    | DateTriggerInput\n    | WeeklyTriggerInput\n    | DailyTriggerInput\n    | CalendarTriggerInput\n    | TimeIntervalTriggerInput\n): trigger is DateTriggerInput {\n  return (\n    trigger instanceof Date ||\n    typeof trigger === 'number' ||\n    (typeof trigger === 'object' && 'date' in trigger)\n  );\n}\n\nfunction parseDateTrigger(trigger: DateTriggerInput): NativeNotificationTriggerInput {\n  if (trigger instanceof Date || typeof trigger === 'number') {\n    return { type: 'date', timestamp: toTimestamp(trigger) };\n  }\n  return { type: 'date', timestamp: toTimestamp(trigger.date), channelId: trigger.channelId };\n}\n\nfunction toTimestamp(date: number | Date) {\n  if (date instanceof Date) {\n    return date.getTime();\n  }\n  return date;\n}\n\nfunction isDailyTriggerInput(\n  trigger: SchedulableNotificationTriggerInput\n): trigger is DailyTriggerInput {\n  if (typeof trigger !== 'object') return false;\n  const { channelId, ...triggerWithoutChannelId } = trigger as DailyTriggerInput;\n  return (\n    Object.keys(triggerWithoutChannelId).length ===\n      DAILY_TRIGGER_EXPECTED_DATE_COMPONENTS.length + 1 &&\n    DAILY_TRIGGER_EXPECTED_DATE_COMPONENTS.every(\n      (component) => component in triggerWithoutChannelId\n    ) &&\n    'repeats' in triggerWithoutChannelId &&\n    triggerWithoutChannelId.repeats === true\n  );\n}\n\nfunction isWeeklyTriggerInput(\n  trigger: SchedulableNotificationTriggerInput\n): trigger is WeeklyTriggerInput {\n  if (typeof trigger !== 'object') return false;\n  const { channelId, ...triggerWithoutChannelId } = trigger as WeeklyTriggerInput;\n  return (\n    Object.keys(triggerWithoutChannelId).length ===\n      WEEKLY_TRIGGER_EXPECTED_DATE_COMPONENTS.length + 1 &&\n    WEEKLY_TRIGGER_EXPECTED_DATE_COMPONENTS.every(\n      (component) => component in triggerWithoutChannelId\n    ) &&\n    'repeats' in triggerWithoutChannelId &&\n    triggerWithoutChannelId.repeats === true\n  );\n}\n\nfunction isYearlyTriggerInput(\n  trigger: SchedulableNotificationTriggerInput\n): trigger is YearlyTriggerInput {\n  if (typeof trigger !== 'object') return false;\n  const { channelId, ...triggerWithoutChannelId } = trigger as YearlyTriggerInput;\n  return (\n    Object.keys(triggerWithoutChannelId).length ===\n      YEARLY_TRIGGER_EXPECTED_DATE_COMPONENTS.length + 1 &&\n    YEARLY_TRIGGER_EXPECTED_DATE_COMPONENTS.every(\n      (component) => component in triggerWithoutChannelId\n    ) &&\n    'repeats' in triggerWithoutChannelId &&\n    triggerWithoutChannelId.repeats === true\n  );\n}\n\nfunction isSecondsPropertyMisusedInCalendarTriggerInput(\n  trigger: TimeIntervalTriggerInput | CalendarTriggerInput\n) {\n  const { channelId, ...triggerWithoutChannelId } = trigger;\n  return (\n    // eg. { seconds: ..., repeats: ..., hour: ... }\n    ('seconds' in triggerWithoutChannelId &&\n      'repeats' in triggerWithoutChannelId &&\n      Object.keys(triggerWithoutChannelId).length > 2) ||\n    // eg. { seconds: ..., hour: ... }\n    ('seconds' in triggerWithoutChannelId &&\n      !('repeats' in triggerWithoutChannelId) &&\n      Object.keys(triggerWithoutChannelId).length > 1)\n  );\n}\n\nfunction validateDateComponentsInTrigger(\n  trigger: NonNullable<NotificationTriggerInput>,\n  components: readonly ValidTriggerDateComponents[]\n) {\n  const anyTriggerType = trigger as any;\n  components.forEach((component) => {\n    if (!(component in anyTriggerType)) {\n      throw new TypeError(`The ${component} parameter needs to be present`);\n    }\n    if (typeof anyTriggerType[component] !== 'number') {\n      throw new TypeError(`The ${component} parameter should be a number`);\n    }\n    switch (component) {\n      case 'month': {\n        const { month } = anyTriggerType;\n        if (month < 0 || month > 11) {\n          throw new RangeError(`The month parameter needs to be between 0 and 11. Found: ${month}`);\n        }\n        break;\n      }\n      case 'day': {\n        const { day, month } = anyTriggerType;\n        const daysInGivenMonth = daysInMonth(month);\n        if (day < 1 || day > daysInGivenMonth) {\n          throw new RangeError(\n            `The day parameter for month ${month} must be between 1 and ${daysInGivenMonth}. Found: ${day}`\n          );\n        }\n        break;\n      }\n      case 'weekday': {\n        const { weekday } = anyTriggerType;\n        if (weekday < 1 || weekday > 7) {\n          throw new RangeError(\n            `The weekday parameter needs to be between 1 and 7. Found: ${weekday}`\n          );\n        }\n        break;\n      }\n      case 'hour': {\n        const { hour } = anyTriggerType;\n        if (hour < 0 || hour > 23) {\n          throw new RangeError(`The hour parameter needs to be between 0 and 23. Found: ${hour}`);\n        }\n        break;\n      }\n      case 'minute': {\n        const { minute } = anyTriggerType;\n        if (minute < 0 || minute > 59) {\n          throw new RangeError(\n            `The minute parameter needs to be between 0 and 59. Found: ${minute}`\n          );\n        }\n        break;\n      }\n    }\n  });\n}\n\n/**\n * Determines the number of days in the given month (or January if omitted).\n * If year is specified, it will include leap year logic, else it will always assume a leap year\n */\nfunction daysInMonth(month: number = 0, year?: number) {\n  return new Date(year ?? 2000, month + 1, 0).getDate();\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}