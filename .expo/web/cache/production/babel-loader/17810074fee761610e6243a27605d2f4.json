{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));var _objectWithoutProperties2=_interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _react=_interopRequireWildcard(require(\"react\"));var _propTypes=_interopRequireDefault(require(\"prop-types\"));var _reactNative=require(\"react-native\");var _art=require(\"@react-native-community/art\");var _Arc=_interopRequireDefault(require(\"./Shapes/Arc\"));var _excluded=[\"animating\",\"children\",\"color\",\"direction\",\"hidesWhenStopped\",\"size\",\"style\",\"thickness\",\"strokeCap\"];function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!==\"function\")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!==\"object\"&&typeof obj!==\"function\"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!==\"default\"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}var AnimatedArc=_reactNative.Animated.createAnimatedComponent(_Arc.default);var MIN_ARC_ANGLE=0.1;var MAX_ARC_ANGLE=1.5*Math.PI;var CircleSnail=function(_Component){(0,_inherits2.default)(CircleSnail,_Component);var _super=_createSuper(CircleSnail);function CircleSnail(props){var _this;(0,_classCallCheck2.default)(this,CircleSnail);_this=_super.call(this,props);_this.state={startAngle:new _reactNative.Animated.Value(-MIN_ARC_ANGLE),endAngle:new _reactNative.Animated.Value(0),rotation:new _reactNative.Animated.Value(0),colorIndex:0};return _this;}(0,_createClass2.default)(CircleSnail,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.animating){this.animate();this.spin();}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(prevProps.animating!==this.props.animating){if(this.props.animating){this.animate();this.spin();}else{this.stopAnimations();}}}},{key:\"animate\",value:function animate(){var _this2=this;var iteration=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;_reactNative.Animated.sequence([_reactNative.Animated.timing(this.state.startAngle,{toValue:-MAX_ARC_ANGLE*iteration-MIN_ARC_ANGLE,duration:this.props.duration||1000,isInteraction:false,easing:_reactNative.Easing.inOut(_reactNative.Easing.quad),useNativeDriver:this.props.useNativeDriver}),_reactNative.Animated.timing(this.state.endAngle,{toValue:-MAX_ARC_ANGLE*iteration,duration:this.props.duration||1000,isInteraction:false,easing:_reactNative.Easing.inOut(_reactNative.Easing.quad),useNativeDriver:this.props.useNativeDriver})]).start(function(endState){if(endState.finished){if(Array.isArray(_this2.props.color)){_this2.setState({colorIndex:iteration%_this2.props.color.length});}_this2.animate(iteration+1);}});}},{key:\"spin\",value:function spin(){var _this3=this;_reactNative.Animated.timing(this.state.rotation,{toValue:1,duration:this.props.spinDuration||5000,easing:_reactNative.Easing.linear,isInteraction:false,useNativeDriver:this.props.useNativeDriver}).start(function(endState){if(endState.finished){_this3.state.rotation.setValue(0);_this3.spin();}});}},{key:\"stopAnimations\",value:function stopAnimations(){this.state.startAngle.stopAnimation();this.state.endAngle.stopAnimation();this.state.rotation.stopAnimation();}},{key:\"render\",value:function render(){var _this$props=this.props,animating=_this$props.animating,children=_this$props.children,color=_this$props.color,direction=_this$props.direction,hidesWhenStopped=_this$props.hidesWhenStopped,size=_this$props.size,style=_this$props.style,thickness=_this$props.thickness,strokeCap=_this$props.strokeCap,restProps=(0,_objectWithoutProperties2.default)(_this$props,_excluded);if(!animating&&hidesWhenStopped){return null;}var radius=size/2-thickness;var offset={top:thickness,left:thickness};var directionFactor=direction==='counter-clockwise'?-1:1;return _react.default.createElement(_reactNative.Animated.View,(0,_extends2.default)({},restProps,{style:[style,{backgroundColor:'transparent',overflow:'hidden',transform:[{rotate:this.state.rotation.interpolate({inputRange:[0,1],outputRange:['0deg',directionFactor*360+\"deg\"]})}]}]}),_react.default.createElement(_art.Surface,{width:size,height:size},_react.default.createElement(AnimatedArc,{direction:direction==='counter-clockwise'?'clockwise':'counter-clockwise',radius:radius,stroke:Array.isArray(color)?color[this.state.colorIndex]:color,offset:offset,startAngle:this.state.startAngle,endAngle:this.state.endAngle,strokeCap:strokeCap,strokeWidth:thickness})),children);}}]);return CircleSnail;}(_react.Component);exports.default=CircleSnail;CircleSnail.propTypes={animating:_propTypes.default.bool,color:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.arrayOf(_propTypes.default.string)]),children:_propTypes.default.node,direction:_propTypes.default.oneOf(['clockwise','counter-clockwise']),duration:_propTypes.default.number,hidesWhenStopped:_propTypes.default.bool,size:_propTypes.default.number,spinDuration:_propTypes.default.number,style:_propTypes.default.any,thickness:_propTypes.default.number,strokeCap:_propTypes.default.string,useNativeDriver:_propTypes.default.bool};CircleSnail.defaultProps={animating:true,color:'rgba(0, 122, 255, 1)',direction:'counter-clockwise',hidesWhenStopped:false,size:40,thickness:3,strokeCap:'round',useNativeDriver:false};","map":{"version":3,"names":["AnimatedArc","Animated","createAnimatedComponent","Arc","MIN_ARC_ANGLE","MAX_ARC_ANGLE","Math","PI","CircleSnail","props","state","startAngle","Value","endAngle","rotation","colorIndex","animating","animate","spin","prevProps","stopAnimations","iteration","sequence","timing","toValue","duration","isInteraction","easing","Easing","inOut","quad","useNativeDriver","start","endState","finished","Array","isArray","color","setState","length","spinDuration","linear","setValue","stopAnimation","children","direction","hidesWhenStopped","size","style","thickness","strokeCap","restProps","radius","offset","top","left","directionFactor","backgroundColor","overflow","transform","rotate","interpolate","inputRange","outputRange","Component","propTypes","PropTypes","bool","oneOfType","string","arrayOf","node","oneOf","number","any","defaultProps"],"sources":["D:/React_Native/SourceCode_VPM_Swine/node_modules/react-native-progress/CircleSnail.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Animated, Easing } from 'react-native';\nimport { Surface as ARTSurface } from '@react-native-community/art';\n\nimport Arc from './Shapes/Arc';\n\nconst AnimatedArc = Animated.createAnimatedComponent(Arc);\n\nconst MIN_ARC_ANGLE = 0.1;\nconst MAX_ARC_ANGLE = 1.5 * Math.PI;\n\nexport default class CircleSnail extends Component {\n  static propTypes = {\n    animating: PropTypes.bool,\n    color: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.arrayOf(PropTypes.string),\n    ]),\n    children: PropTypes.node,\n    direction: PropTypes.oneOf(['clockwise', 'counter-clockwise']),\n    duration: PropTypes.number,\n    hidesWhenStopped: PropTypes.bool,\n    size: PropTypes.number,\n    spinDuration: PropTypes.number,\n    style: PropTypes.any,\n    thickness: PropTypes.number,\n    strokeCap: PropTypes.string,\n    useNativeDriver: PropTypes.bool,\n  };\n\n  static defaultProps = {\n    animating: true,\n    color: 'rgba(0, 122, 255, 1)',\n    direction: 'counter-clockwise',\n    hidesWhenStopped: false,\n    size: 40,\n    thickness: 3,\n    strokeCap: 'round',\n    useNativeDriver: false,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      startAngle: new Animated.Value(-MIN_ARC_ANGLE),\n      endAngle: new Animated.Value(0),\n      rotation: new Animated.Value(0),\n      colorIndex: 0,\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.animating) {\n      this.animate();\n      this.spin();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.animating !== this.props.animating) {\n      if (this.props.animating) {\n        this.animate();\n        this.spin();\n      } else {\n        this.stopAnimations();\n      }\n    }\n  }\n\n  animate(iteration = 1) {\n    Animated.sequence([\n      Animated.timing(this.state.startAngle, {\n        toValue: -MAX_ARC_ANGLE * iteration - MIN_ARC_ANGLE,\n        duration: this.props.duration || 1000,\n        isInteraction: false,\n        easing: Easing.inOut(Easing.quad),\n        useNativeDriver: this.props.useNativeDriver,\n      }),\n      Animated.timing(this.state.endAngle, {\n        toValue: -MAX_ARC_ANGLE * iteration,\n        duration: this.props.duration || 1000,\n        isInteraction: false,\n        easing: Easing.inOut(Easing.quad),\n        useNativeDriver: this.props.useNativeDriver,\n      }),\n    ]).start(endState => {\n      if (endState.finished) {\n        if (Array.isArray(this.props.color)) {\n          this.setState({\n            colorIndex: iteration % this.props.color.length,\n          });\n        }\n        this.animate(iteration + 1);\n      }\n    });\n  }\n\n  spin() {\n    Animated.timing(this.state.rotation, {\n      toValue: 1,\n      duration: this.props.spinDuration || 5000,\n      easing: Easing.linear,\n      isInteraction: false,\n      useNativeDriver: this.props.useNativeDriver,\n    }).start(endState => {\n      if (endState.finished) {\n        this.state.rotation.setValue(0);\n        this.spin();\n      }\n    });\n  }\n\n  stopAnimations() {\n    this.state.startAngle.stopAnimation();\n    this.state.endAngle.stopAnimation();\n    this.state.rotation.stopAnimation();\n  }\n\n  render() {\n    const {\n      animating,\n      children,\n      color,\n      direction,\n      hidesWhenStopped,\n      size,\n      style,\n      thickness,\n      strokeCap,\n      ...restProps\n    } = this.props;\n\n    if (!animating && hidesWhenStopped) {\n      return null;\n    }\n\n    const radius = size / 2 - thickness;\n    const offset = {\n      top: thickness,\n      left: thickness,\n    };\n\n    const directionFactor = direction === 'counter-clockwise' ? -1 : 1;\n\n    return (\n      <Animated.View\n        {...restProps}\n        style={[\n          style,\n          {\n            backgroundColor: 'transparent',\n            overflow: 'hidden',\n            transform: [\n              {\n                rotate: this.state.rotation.interpolate({\n                  inputRange: [0, 1],\n                  outputRange: ['0deg', `${directionFactor * 360}deg`],\n                }),\n              },\n            ],\n          },\n        ]}\n      >\n        <ARTSurface width={size} height={size}>\n          <AnimatedArc\n            direction={\n              direction === 'counter-clockwise'\n                ? 'clockwise'\n                : 'counter-clockwise'\n            }\n            radius={radius}\n            stroke={Array.isArray(color) ? color[this.state.colorIndex] : color}\n            offset={offset}\n            startAngle={this.state.startAngle}\n            endAngle={this.state.endAngle}\n            strokeCap={strokeCap}\n            strokeWidth={thickness}\n          />\n        </ARTSurface>\n        {children}\n      </Animated.View>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}