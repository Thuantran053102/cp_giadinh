{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _regenerator=_interopRequireDefault(require(\"@babel/runtime/regenerator\"));var _extends2=_interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _nativeBase=require(\"native-base\");var _react=_interopRequireWildcard(require(\"react\"));var _reactNative=require(\"react-native\");var _Myheader=_interopRequireDefault(require(\"../../components/Myheader\"));var _reactNativeTimelineFlatlist=_interopRequireDefault(require(\"react-native-timeline-flatlist\"));var _func=require(\"../../func\");var _TheJob=require(\"../../api/TheJob\");function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!==\"function\")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!==\"object\"&&typeof obj!==\"function\"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!==\"default\"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}var EDetailJobStatus=function(_Component){(0,_inherits2.default)(EDetailJobStatus,_Component);var _super=_createSuper(EDetailJobStatus);function EDetailJobStatus(){var _this;(0,_classCallCheck2.default)(this,EDetailJobStatus);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={rule:\"\"};_this.handleFinish=function _callee(){var user,data;return _regenerator.default.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regenerator.default.awrap((0,_func.GetUserLocal)());case 2:user=_context.sent;data=_this.props.route.params.data;_reactNative.Alert.alert(\"Thông báo\",\"Bạn chắc là đã hoàn thành công việc?\",[{text:\"Hoàn thành\",onPress:function onPress(){(0,_TheJob.ApiApproveJob)(data.id,\"2\",user.userid,user.db_name,\"\",function(res){if(res==='success'){(0,_func.VpmPushNotification)(\"4\",\"Kỹ thuật đã hoàn thành công việc\");_reactNative.Alert.alert(\"Thông báo\",\"Đã hoàn thành\");_this.props.navigation.goBack();}});}},{text:\"Chưa\"}]);case 5:case\"end\":return _context.stop();}}},null,null,null,Promise);};return _this;}(0,_createClass2.default)(EDetailJobStatus,[{key:\"componentDidMount\",value:function componentDidMount(){var rule;return _regenerator.default.async(function componentDidMount$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regenerator.default.awrap((0,_func.CheckUserRule)());case 2:rule=_context2.sent;this.setState({rule:rule});case 4:case\"end\":return _context2.stop();}}},null,this,null,Promise);}},{key:\"render\",value:function render(){var data=this.props.route.params.data;var time=data.job_history;var timeline=[];time.forEach(function(item){var obj={title:item.history_date,description:item.job_status_name};timeline.push(obj);});return _react.default.createElement(_nativeBase.Container,{style:{backgroundColor:\"#f1f1f1\"}},_react.default.createElement(_Myheader.default,(0,_extends2.default)({},this.props,{goBack:false,title:\"Tr\\u1EA1ng th\\xE1i\"})),_react.default.createElement(_nativeBase.Content,null,_react.default.createElement(_reactNative.View,{style:{margin:15}},_react.default.createElement(_nativeBase.Text,{style:{marginBottom:10,fontWeight:\"bold\"}},data.pm_time),_react.default.createElement(_reactNative.View,{style:{backgroundColor:\"white\",borderRadius:15,padding:20,borderLeftWidth:5,borderLeftColor:\"blue\",marginBottom:15}},_react.default.createElement(_nativeBase.Text,{style:{marginBottom:10,fontWeight:\"bold\",textTransform:\"uppercase\",color:\"green\"}},data.id),_react.default.createElement(_nativeBase.Text,{style:{marginBottom:10,fontWeight:\"bold\",textTransform:\"capitalize\"}},data.mc_name_vn),_react.default.createElement(_nativeBase.Text,{style:{marginBottom:10,color:\"#333\"}},data.pm_name),_react.default.createElement(_reactNative.View,{style:{borderTopWidth:1,borderTopColor:\"gray\",paddingTop:15,marginTop:10}},_react.default.createElement(_reactNativeTimelineFlatlist.default,{data:timeline,showTime:false,titleStyle:{fontWeight:\"bold\"}})),this.state.rule===_func.UserType.Engineer&&data.job_status_code!==\"13\"?_react.default.createElement(_nativeBase.Button,{onPress:this.handleFinish,full:true,rounded:true},_react.default.createElement(_nativeBase.Text,{uppercase:false},\"Ho\\xE0n th\\xE0nh\")):null))));}}]);return EDetailJobStatus;}(_react.Component);var _default=EDetailJobStatus;exports.default=_default;","map":{"version":3,"names":["EDetailJobStatus","state","rule","handleFinish","GetUserLocal","user","data","props","route","params","Alert","alert","text","onPress","ApiApproveJob","id","userid","db_name","res","VpmPushNotification","navigation","goBack","CheckUserRule","setState","time","job_history","timeline","forEach","item","obj","title","history_date","description","job_status_name","push","backgroundColor","margin","marginBottom","fontWeight","pm_time","borderRadius","padding","borderLeftWidth","borderLeftColor","textTransform","color","mc_name_vn","pm_name","borderTopWidth","borderTopColor","paddingTop","marginTop","UserType","Engineer","job_status_code","Component"],"sources":["D:/React_Native/SourceCode_VPM_Swine/screen/Engineers/EDetailJobStatus.js"],"sourcesContent":["import { Button, Container, Content, Tab, Tabs, Text, Textarea } from 'native-base';\nimport React, { Component } from 'react';\nimport { View, Alert } from 'react-native';\nimport Myheader from '../../components/Myheader';\nimport Timeline from 'react-native-timeline-flatlist'\nimport { CheckUserRule, GetUserLocal, UserType, VpmPushNotification } from '../../func';\nimport { ApiApproveJob } from '../../api/TheJob';\n\nclass EDetailJobStatus extends Component {\n    state = {\n        rule: \"\"\n    }\n    handleFinish = async () => {\n        let user = await GetUserLocal();\n        let { data } = this.props.route.params;\n\n        Alert.alert(\"Thông báo\", \"Bạn chắc là đã hoàn thành công việc?\", [\n            {\n                text: \"Hoàn thành\", onPress: () => {\n                    ApiApproveJob(data.id, \"2\", user.userid, user.db_name, \"\", res => {\n                        if (res === 'success') {\n                            VpmPushNotification(\"4\", \"Kỹ thuật đã hoàn thành công việc\");\n                            Alert.alert(\"Thông báo\", \"Đã hoàn thành\");\n                            this.props.navigation.goBack();\n                        }\n                    })\n                }\n            },\n            {text: \"Chưa\"}\n        ])\n    }\n\n    async componentDidMount() {\n        let rule = await CheckUserRule();\n        this.setState({ rule })\n    }\n\n    render() {\n        let { data } = this.props.route.params;\n        let time = data.job_history;\n        let timeline = [];\n        time.forEach(item => {\n            let obj = {\n                // time: item.history_date,\n                title: item.history_date,\n                description: item.job_status_name\n            }\n            timeline.push(obj);\n        });\n\n        return (\n            <Container style={{ backgroundColor: \"#f1f1f1\" }}>\n                <Myheader {...this.props} goBack={false} title=\"Trạng thái\" />\n                <Content>\n                    <View style={{\n                        margin: 15\n                    }}>\n                        <Text style={{ marginBottom: 10, fontWeight: \"bold\" }}>{data.pm_time}</Text>\n                        <View style={{\n                            backgroundColor: \"white\",\n                            borderRadius: 15,\n                            padding: 20,\n                            borderLeftWidth: 5,\n                            borderLeftColor: \"blue\",\n                            marginBottom: 15\n                        }}>\n                            <Text style={{ marginBottom: 10, fontWeight: \"bold\", textTransform: \"uppercase\", color: \"green\" }}>{data.id}</Text>\n                            <Text style={{ marginBottom: 10, fontWeight: \"bold\", textTransform: \"capitalize\" }}>{data.mc_name_vn}</Text>\n                            <Text style={{ marginBottom: 10, color: \"#333\" }}>{data.pm_name}</Text>\n\n                            <View style={{ borderTopWidth: 1, borderTopColor: \"gray\", paddingTop: 15, marginTop: 10 }}>\n                                <Timeline\n                                    // timeStyle={{ textAlign: 'center', backgroundColor: '#f1f1f1', color: '#000', padding: 5, borderRadius: 13 }}\n                                    data={timeline}\n                                    showTime={false}\n                                    titleStyle={{ fontWeight: \"bold\" }}\n                                />\n                            </View>\n\n                            {(this.state.rule === UserType.Engineer && data.job_status_code !== \"13\") ?<Button onPress={this.handleFinish} full rounded><Text uppercase={false}>Hoàn thành</Text></Button>:null}\n                        </View>\n                    </View>\n                </Content>\n            </Container>\n        );\n    }\n}\n\nexport default EDetailJobStatus;"],"mappings":"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"},"metadata":{},"sourceType":"script"}