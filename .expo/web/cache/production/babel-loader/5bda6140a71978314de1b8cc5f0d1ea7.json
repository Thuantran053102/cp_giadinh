{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _regenerator=_interopRequireDefault(require(\"@babel/runtime/regenerator\"));var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _react=_interopRequireWildcard(require(\"react\"));var _reactNative=require(\"react-native\");var _nativeBase=require(\"native-base\");var _expoLinearGradient=require(\"expo-linear-gradient\");var _User=require(\"../api/User\");var _func=require(\"../func\");function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!==\"function\")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!==\"object\"&&typeof obj!==\"function\"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!==\"default\"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}var _Dimensions$get=_reactNative.Dimensions.get('screen'),width=_Dimensions$get.width;var Myheader=function(_Component){(0,_inherits2.default)(Myheader,_Component);var _super=_createSuper(Myheader);function Myheader(){var _this;(0,_classCallCheck2.default)(this,Myheader);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={active:0,rule:\"\"};_this.handleActive=function _callee(active){var user,value;return _regenerator.default.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regenerator.default.awrap((0,_func.GetUserLocal)());case 2:user=_context.sent;value=\"\";if(active){value=\"1\";}else{value=\"0\";}(0,_User.ApiUserUpdateActive)(value,user.userid,user.db_name,function(res){});_this.setState({active:active});case 7:case\"end\":return _context.stop();}}},null,null,null,Promise);};return _this;}(0,_createClass2.default)(Myheader,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var rule,user;return _regenerator.default.async(function componentDidMount$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regenerator.default.awrap((0,_func.CheckUserRule)());case 2:rule=_context2.sent;this.setState({rule:rule});_context2.next=6;return _regenerator.default.awrap((0,_func.GetUserLocal)());case 6:user=_context2.sent;(0,_User.ApiUserActive)(user.userid,user.db_name,function(res){var active=false;if(res===\"1\"){active=true;}_this2.setState({active:active});});case 8:case\"end\":return _context2.stop();}}},null,this,null,Promise);}},{key:\"render\",value:function render(){var _this3=this;var btnGoBack=this.props.goBack?_react.default.createElement(_nativeBase.Left,null,_react.default.createElement(_nativeBase.Button,{onPress:function onPress(){return _this3.props.navigation.goBack();},transparent:true},_react.default.createElement(_nativeBase.Icon,{name:\"md-arrow-back\",style:{color:\"#fff\"}}))):_react.default.createElement(_nativeBase.Left,null,_react.default.createElement(_nativeBase.Button,{onPress:function onPress(){return _this3.props.navigation.toggleDrawer();},transparent:true},_react.default.createElement(_nativeBase.Icon,{name:\"ios-menu\",style:{color:\"#fff\"}})));var viewTitle=this.props.title!==null&&_react.default.createElement(_nativeBase.Body,{style:{alignItems:\"center\"}},_react.default.createElement(_nativeBase.Title,{style:{color:\"#fff\"}},this.props.title));return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_expoLinearGradient.LinearGradient,{start:{x:0,y:1},end:{x:1,y:1},colors:[\"#024BC5\",\"#5991FB\"]},_react.default.createElement(_nativeBase.Header,{iosBarStyle:\"light-content\",androidStatusBarColor:\"transparent\",noShadow:true,searchBar:true,transparent:true,style:{height:_reactNative.Platform.OS===\"ios\"?50:65,flexDirection:this.props.search?\"column\":\"row\"}},btnGoBack,viewTitle,_react.default.createElement(_nativeBase.Right,null,this.state.rule===_func.UserType.Engineer&&_react.default.createElement(_nativeBase.Switch,{onValueChange:this.handleActive,value:this.state.active,ios_backgroundColor:\"#eee\"})))));}}]);return Myheader;}(_react.Component);Myheader.defaultProps={title:null,goBack:true,isHome:false,bg:'#008c44',showCart:true,search:false};var _default=Myheader;exports.default=_default;","map":{"version":3,"names":["Dimensions","get","width","Myheader","state","active","rule","handleActive","GetUserLocal","user","value","ApiUserUpdateActive","userid","db_name","res","setState","CheckUserRule","ApiUserActive","btnGoBack","props","goBack","navigation","color","toggleDrawer","viewTitle","title","alignItems","x","y","height","Platform","OS","flexDirection","search","UserType","Engineer","Component","defaultProps","isHome","bg","showCart"],"sources":["D:/React_Native/SourceCode_VPM_Swine/components/Myheader.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Dimensions, Platform } from 'react-native';\nimport { Header, Left, Body, Right, Title, Button, Icon, Switch } from 'native-base';\nimport { Fragment } from 'react';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { ApiUserActive, ApiUserUpdateActive } from '../api/User';\nimport { CheckUserRule, GetUserLocal, UserType } from '../func';\nconst { width } = Dimensions.get('screen');\n\nclass Myheader extends Component {\n\tstate = {\n\t\tactive: 0,\n\t\trule: \"\"\n\t}\n\n\tasync componentDidMount() {\n\t\tlet rule = await CheckUserRule();\n\t\tthis.setState({ rule })\n\t\tlet user = await GetUserLocal();\n\t\tApiUserActive(user.userid, user.db_name, res => {\n\t\t\tlet active = false;\n\t\t\tif (res === \"1\") {\n\t\t\t\tactive = true;\n\t\t\t}\n\t\t\tthis.setState({ active })\n\t\t})\n\t}\n\n\thandleActive = async (active) => {\n\t\tlet user = await GetUserLocal();\n\t\tlet value = \"\";\n\t\tif (active) {\n\t\t\tvalue = \"1\"\n\t\t} else {\n\t\t\tvalue = \"0\"\n\t\t}\n\t\tApiUserUpdateActive(value, user.userid, user.db_name, res => {\n\t\t\t// console.log(res);\n\t\t})\n\t\tthis.setState({ active })\n\t}\n\n\trender() {\n\t\t//define button go back\n\t\tlet btnGoBack = this.props.goBack ? <Left><Button onPress={() => this.props.navigation.goBack()} transparent>\n\t\t\t<Icon name='md-arrow-back' style={{ color: \"#fff\" }} />\n\t\t</Button></Left> : <Left><Button onPress={() => this.props.navigation.toggleDrawer()} transparent>\n\t\t\t<Icon name='ios-menu' style={{ color: \"#fff\" }} />\n\t\t</Button></Left>;\n\n\t\t//define title\n\t\tlet viewTitle = this.props.title !== null && <Body style={{ alignItems: \"center\" }}>\n\t\t\t<Title style={{ color: \"#fff\" }}>{this.props.title}</Title>\n\t\t</Body>\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<LinearGradient\n\t\t\t\t\tstart={{ x: 0, y: 1 }}\n\t\t\t\t\tend={{ x: 1, y: 1 }}\n\t\t\t\t\tcolors={[\"#024BC5\", \"#5991FB\"]}\n\t\t\t\t>\n\t\t\t\t\t<Header\n\t\t\t\t\t\tiosBarStyle=\"light-content\"\n\t\t\t\t\t\tandroidStatusBarColor=\"transparent\"\n\t\t\t\t\t\tnoShadow\n\t\t\t\t\t\tsearchBar\n\t\t\t\t\t\ttransparent\n\t\t\t\t\t\tstyle={{ height: Platform.OS === \"ios\" ? 50 : 65, flexDirection: this.props.search ? \"column\" : \"row\" }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{btnGoBack}\n\t\t\t\t\t\t{viewTitle}\n\t\t\t\t\t\t<Right>\n\t\t\t\t\t\t\t{this.state.rule === UserType.Engineer && <Switch onValueChange={this.handleActive} value={this.state.active} ios_backgroundColor=\"#eee\" />}\n\t\t\t\t\t\t</Right>\n\t\t\t\t\t</Header>\n\t\t\t\t</LinearGradient>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\n\nMyheader.defaultProps = {\n\ttitle: null,\n\tgoBack: true,\n\tisHome: false,\n\tbg: '#008c44',\n\tshowCart: true,\n\tsearch: false\n}\n\nexport default Myheader;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}