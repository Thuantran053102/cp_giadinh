{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=exports.ThemeShape=void 0;var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _propTypes=require(\"prop-types\");var _resolveIncludes=_interopRequireDefault(require(\"./resolveIncludes\"));var _mergeComponentAndThemeStyles=_interopRequireDefault(require(\"./mergeComponentAndThemeStyles\"));var _normalizeStyle=_interopRequireDefault(require(\"./StyleNormalizer/normalizeStyle\"));var THEME_STYLE=\"@@shoutem.theme/themeStyle\";var THEME_STYLE_CACHE=\"@@shoutem.theme/themeCachedStyle\";var defaultTheme;var resolveStyle=function resolveStyle(style,baseStyle){return(0,_normalizeStyle.default)((0,_resolveIncludes.default)(style,baseStyle));};var Theme=function(){function Theme(themeStyle){(0,_classCallCheck2.default)(this,Theme);this[THEME_STYLE]=resolveStyle(themeStyle);this[THEME_STYLE_CACHE]={};}(0,_createClass2.default)(Theme,[{key:\"createComponentStyle\",value:function createComponentStyle(componentName,defaultStyle){if(this[THEME_STYLE_CACHE][componentName]){return this[THEME_STYLE_CACHE][componentName];}var componentIncludedStyle=resolveStyle(defaultStyle,this[THEME_STYLE]);this[THEME_STYLE_CACHE][componentName]=(0,_mergeComponentAndThemeStyles.default)(componentIncludedStyle,this[THEME_STYLE][componentName],this[THEME_STYLE]);return this[THEME_STYLE_CACHE][componentName];}}],[{key:\"setDefaultThemeStyle\",value:function setDefaultThemeStyle(style){defaultTheme=new Theme(style);}},{key:\"getDefaultTheme\",value:function getDefaultTheme(){if(!defaultTheme){defaultTheme=new Theme({});}return defaultTheme;}}]);return Theme;}();exports.default=Theme;var ThemeShape=_propTypes.PropTypes.shape({createComponentStyle:_propTypes.PropTypes.func.isRequired});exports.ThemeShape=ThemeShape;","map":{"version":3,"names":["THEME_STYLE","THEME_STYLE_CACHE","defaultTheme","resolveStyle","style","baseStyle","normalizeStyle","resolveIncludes","Theme","themeStyle","componentName","defaultStyle","componentIncludedStyle","mergeComponentAndThemeStyles","ThemeShape","PropTypes","shape","createComponentStyle","func","isRequired"],"sources":["D:/React_Native/SourceCode_VPM_Swine/node_modules/native-base-shoutem-theme/src/Theme.js"],"sourcesContent":["import { PropTypes } from \"prop-types\";\nimport resolveIncludes from \"./resolveIncludes\";\nimport mergeComponentAndThemeStyles from \"./mergeComponentAndThemeStyles\";\nimport normalizeStyle from \"./StyleNormalizer/normalizeStyle\";\n\n// Privates, ideally those should be symbols\nconst THEME_STYLE = \"@@shoutem.theme/themeStyle\";\nconst THEME_STYLE_CACHE = \"@@shoutem.theme/themeCachedStyle\";\n\nlet defaultTheme;\n\nconst resolveStyle = (style, baseStyle) =>\n  normalizeStyle(resolveIncludes(style, baseStyle));\n\n/**\n * The theme defines the application style, and provides methods to\n * resolve the style for a specific component.\n *\n * A theme style is a JavaScript object that contains the\n * React Native style rules, with several additional features:\n * 1. Style rules may be nested arbitrarily\n * 2. Top level keys may target specific components by using their fully qualified name\n * 3. INCLUDE keyword may be used to include any top level style key rules in any other style key\n *\n * Top level keys in a theme are usually some shared styles and component styles, e.g.:\n * {\n *   // Shared style\n *   baseFont: {\n *     fontFamily: '...'\n *   },\n *\n *   // Style that will be applied to shoutem.ui.Text component\n *   'shoutem.ui.Text': {\n *     [INCLUDE]: ['baseFont'],\n *     color: 'black'\n *   }\n * }\n */\nexport default class Theme {\n  constructor(themeStyle) {\n    this[THEME_STYLE] = resolveStyle(themeStyle);\n    this[THEME_STYLE_CACHE] = {};\n  }\n\n  /**\n   * Sets the given style as a default theme style.\n   */\n  static setDefaultThemeStyle(style) {\n    defaultTheme = new Theme(style);\n  }\n\n  /**\n   * Returns the default theme that will be used as fallback\n   * if the StyleProvider is not configured in the app.\n   */\n  static getDefaultTheme() {\n    if (!defaultTheme) {\n      defaultTheme = new Theme({});\n    }\n\n    return defaultTheme;\n  }\n\n  /**\n   * Creates a component style by merging the theme style on top of the\n   * provided default component style. Any rules in the theme style will\n   * override the rules from the base component style.\n   *\n   * This method will also resolve any INCLUDE keywords in the theme or\n   * component styles before returning the final style.\n   *\n   * @param componentName fully qualified component name.\n   * @param defaultStyle - default component style that will be used as base style.\n   */\n  createComponentStyle(componentName, defaultStyle) {\n    if (this[THEME_STYLE_CACHE][componentName]) {\n      return this[THEME_STYLE_CACHE][componentName];\n    }\n\n    const componentIncludedStyle = resolveStyle(\n      defaultStyle,\n      this[THEME_STYLE]\n    );\n\n    /**\n     * This is static component style (static per componentName). This style can only\n     * change if the theme changes during runtime, so it is safe to reuse it within a\n     * scope of a theme once it is resolved for the first time.\n     */\n    this[THEME_STYLE_CACHE][componentName] = mergeComponentAndThemeStyles(\n      componentIncludedStyle,\n      this[THEME_STYLE][componentName],\n      this[THEME_STYLE]\n    );\n\n    return this[THEME_STYLE_CACHE][componentName];\n  }\n}\n\nexport const ThemeShape = PropTypes.shape({\n  createComponentStyle: PropTypes.func.isRequired\n});\n"],"mappings":"4WAAA,qCACA,0EACA,oGACA,wFAGA,GAAMA,YAAW,CAAG,4BAApB,CACA,GAAMC,kBAAiB,CAAG,kCAA1B,CAEA,GAAIC,aAAJ,CAEA,GAAMC,aAAY,CAAG,QAAfA,aAAe,CAACC,KAAD,CAAQC,SAAR,QACnB,GAAAC,uBAAA,EAAe,GAAAC,wBAAA,EAAgBH,KAAhB,CAAuBC,SAAvB,CAAf,CADmB,EAArB,C,GA2BqBG,M,YACnB,eAAYC,UAAZ,CAAwB,0CACtB,KAAKT,WAAL,EAAoBG,YAAY,CAACM,UAAD,CAAhC,CACA,KAAKR,iBAAL,EAA0B,EAA1B,CACD,C,mEAgCD,8BAAqBS,aAArB,CAAoCC,YAApC,CAAkD,CAChD,GAAI,KAAKV,iBAAL,EAAwBS,aAAxB,CAAJ,CAA4C,CAC1C,MAAO,MAAKT,iBAAL,EAAwBS,aAAxB,CAAP,CACD,CAED,GAAME,uBAAsB,CAAGT,YAAY,CACzCQ,YADyC,CAEzC,KAAKX,WAAL,CAFyC,CAA3C,CAUA,KAAKC,iBAAL,EAAwBS,aAAxB,EAAyC,GAAAG,qCAAA,EACvCD,sBADuC,CAEvC,KAAKZ,WAAL,EAAkBU,aAAlB,CAFuC,CAGvC,KAAKV,WAAL,CAHuC,CAAzC,CAMA,MAAO,MAAKC,iBAAL,EAAwBS,aAAxB,CAAP,CACD,C,sCAjDD,8BAA4BN,KAA5B,CAAmC,CACjCF,YAAY,CAAG,GAAIM,MAAJ,CAAUJ,KAAV,CAAf,CACD,C,+BAMD,0BAAyB,CACvB,GAAI,CAACF,YAAL,CAAmB,CACjBA,YAAY,CAAG,GAAIM,MAAJ,CAAU,EAAV,CAAf,CACD,CAED,MAAON,aAAP,CACD,C,2CAsCI,GAAMY,WAAU,CAAGC,oBAAA,CAAUC,KAAV,CAAgB,CACxCC,oBAAoB,CAAEF,oBAAA,CAAUG,IAAV,CAAeC,UADG,CAAhB,CAAnB,C"},"metadata":{},"sourceType":"script"}