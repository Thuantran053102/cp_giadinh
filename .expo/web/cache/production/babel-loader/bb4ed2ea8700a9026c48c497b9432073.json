{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _regenerator=_interopRequireDefault(require(\"@babel/runtime/regenerator\"));var _extends2=_interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _nativeBase=require(\"native-base\");var _react=_interopRequireWildcard(require(\"react\"));var _reactNative=require(\"react-native\");var _Myheader=_interopRequireDefault(require(\"../../components/Myheader\"));var _Status=require(\"../../api/Status\");var _func=require(\"../../func\");var _StatusItem=_interopRequireDefault(require(\"../../components/StatusItem\"));var _datetimepicker=_interopRequireDefault(require(\"@react-native-community/datetimepicker\"));var _TheJob=require(\"../../api/TheJob\");function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!==\"function\")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!==\"object\"&&typeof obj!==\"function\"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!==\"default\"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}var Edelay=function(_Component){(0,_inherits2.default)(Edelay,_Component);var _super=_createSuper(Edelay);function Edelay(){var _this;(0,_classCallCheck2.default)(this,Edelay);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],page:1,date:(0,_func.CurrentTime)(),note:\"\",refreshing:false};_this.handleDateChange=function(event,value){var fixDate=(0,_func.TimeToString)(value);_this.setState({date:fixDate});};_this.handleSend=function _callee(){var data,user,postData;return _regenerator.default.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=_this.props.route.params.data;_context.next=3;return _regenerator.default.awrap((0,_func.GetUserLocal)());case 3:user=_context.sent;postData={job_id:data.id,req_time:_this.state.date,req_note:_this.state.note,userid:user.userid,db_name:user.db_name};_reactNative.Alert.alert(\"Thông báo\",\"Xác nhận yêu cầu dời lịch\",[{text:\"Đồng ý\",onPress:function onPress(){(0,_TheJob.ApiPostJob)(postData,function(res){if(res===\"success\"){_reactNative.Alert.alert(\"Thông báo\",\"Đã gởi yêu cầu dời lịch\");_this.props.navigation.goBack();}});}},{text:\"Không\"}]);case 6:case\"end\":return _context.stop();}}},null,null,null,Promise);};_this.handleNote=function(note){_this.setState({note:note});};return _this;}(0,_createClass2.default)(Edelay,[{key:\"render\",value:function render(){var _this2=this;var date=this.state.date;var data=this.props.route.params.data;return _react.default.createElement(_nativeBase.Container,{style:{backgroundColor:\"#f1f1f1\"}},_react.default.createElement(_Myheader.default,(0,_extends2.default)({},this.props,{goBack:true,title:\"B\\u1EA3o tr\\xEC\"})),_react.default.createElement(_nativeBase.Content,{refreshControl:_react.default.createElement(_reactNative.RefreshControl,{refreshing:this.state.refreshing,onRefresh:function onRefresh(){return _this2.componentDidMount();}})},_react.default.createElement(_reactNative.View,{style:{backgroundColor:\"#fff\",margin:15,padding:15,borderRadius:5}},_react.default.createElement(_nativeBase.Text,{style:{textAlign:\"center\",fontWeight:\"bold\",marginBottom:20}},\"Y\\xCAU C\\u1EA6U D\\u1EDCI L\\u1ECACH\"),_react.default.createElement(_nativeBase.Text,null,data.mc_name_vn),_react.default.createElement(_nativeBase.Text,{style:{marginBottom:30,color:\"green\"}},\"N\\u1ED9i dung: \",data.pm_name),_react.default.createElement(_nativeBase.Label,{style:{fontSize:14,color:\"gray\"}},\"Ng\\xE0y mong mu\\u1ED1n\"),_react.default.createElement(_datetimepicker.default,{testID:\"dateTimePicker\",value:new Date(date),mode:'date',is24Hour:true,display:\"default\",onChange:this.handleDateChange}),_react.default.createElement(_nativeBase.Item,{regular:true,style:{marginTop:30}},_react.default.createElement(_nativeBase.Textarea,{onChangeText:this.handleNote,placeholder:\"Ghi ch\\xFA\",rowSpan:3})),_react.default.createElement(_nativeBase.Button,{onPress:this.handleSend,full:true,rounded:true,style:{marginTop:15}},_react.default.createElement(_nativeBase.Text,{uppercase:false},\"G\\u1EDFi y\\xEAu c\\u1EA7u\")))));}}]);return Edelay;}(_react.Component);var _default=Edelay;exports.default=_default;","map":{"version":3,"names":["Edelay","state","data","page","date","CurrentTime","note","refreshing","handleDateChange","event","value","fixDate","TimeToString","setState","handleSend","props","route","params","GetUserLocal","user","postData","job_id","id","req_time","req_note","userid","db_name","Alert","alert","text","onPress","ApiPostJob","res","navigation","goBack","handleNote","backgroundColor","componentDidMount","margin","padding","borderRadius","textAlign","fontWeight","marginBottom","mc_name_vn","color","pm_name","fontSize","Date","marginTop","Component"],"sources":["D:/React_Native/SourceCode_VPM_Swine/screen/Engineers/Edelay.js"],"sourcesContent":["import { Button, Container, Content, Item, Label, Tab, Tabs, Text, Textarea } from 'native-base';\nimport React, { Component } from 'react';\nimport { View, Alert, RefreshControl } from 'react-native';\nimport Myheader from '../../components/Myheader';\nimport { ApiGetUserStatus } from '../../api/Status';\nimport { CurrentTime, GetUserLocal, TimeToString, UserType } from '../../func';\nimport StatusItem from '../../components/StatusItem';\nimport DateTimePicker from '@react-native-community/datetimepicker';\nimport { ApiPostJob } from '../../api/TheJob';\nclass Edelay extends Component {\n    state = {\n        data: [],\n        page: 1,\n        date: CurrentTime(),\n        note: \"\",\n        refreshing: false\n    }\n\n    handleDateChange = (event, value) => {\n        let fixDate = TimeToString(value);\n        this.setState({ date: fixDate })\n\n    }\n\n    handleSend = async () => {\n        let { data } = this.props.route.params;\n        let user = await GetUserLocal();\n        let postData = {\n            job_id: data.id,\n            req_time: this.state.date,\n            req_note: this.state.note,\n            userid: user.userid,\n            db_name: user.db_name\n        }\n        Alert.alert(\"Thông báo\", \"Xác nhận yêu cầu dời lịch\", [\n            {\n                text: \"Đồng ý\",\n                onPress: () => {\n                    ApiPostJob(postData, res => {\n                        if (res === \"success\") {\n                            Alert.alert(\"Thông báo\", \"Đã gởi yêu cầu dời lịch\");\n                            this.props.navigation.goBack();\n                        }\n                    })\n                }\n\n            },\n            {\n                text: \"Không\"\n            }\n        ])\n\n    }\n\n    handleNote = (note) => {\n        this.setState({ note })\n    }\n\n\n    render() {\n        let { date } = this.state;\n        let { data } = this.props.route.params;\n        return (\n            <Container style={{ backgroundColor: \"#f1f1f1\" }}>\n                <Myheader {...this.props} goBack={true} title=\"Bảo trì\" />\n                <Content refreshControl={\n                    <RefreshControl refreshing={this.state.refreshing} onRefresh={() => this.componentDidMount()} />\n                }>\n                    <View style={{ backgroundColor: \"#fff\", margin: 15, padding: 15, borderRadius: 5 }}>\n                        <Text style={{ textAlign: \"center\", fontWeight: \"bold\", marginBottom: 20 }}>YÊU CẦU DỜI LỊCH</Text>\n                        <Text>{data.mc_name_vn}</Text>\n                        <Text style={{ marginBottom: 30, color: \"green\" }}>Nội dung: {data.pm_name}</Text>\n                        <Label style={{ fontSize: 14, color: \"gray\" }}>Ngày mong muốn</Label>\n                        <DateTimePicker\n                            testID=\"dateTimePicker\"\n                            value={new Date(date)}\n                            mode={'date'}\n                            is24Hour={true}\n                            display=\"default\"\n                            onChange={this.handleDateChange}\n\n                        />\n                        <Item regular style={{ marginTop: 30 }}>\n                            <Textarea onChangeText={this.handleNote} placeholder=\"Ghi chú\" rowSpan={3}></Textarea>\n                        </Item>\n\n                        <Button onPress={this.handleSend} full rounded style={{ marginTop: 15 }}><Text uppercase={false}>Gởi yêu cầu</Text></Button>\n\n                    </View>\n                </Content>\n            </Container>\n        );\n    }\n}\n\nexport default Edelay;"],"mappings":"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"},"metadata":{},"sourceType":"script"}