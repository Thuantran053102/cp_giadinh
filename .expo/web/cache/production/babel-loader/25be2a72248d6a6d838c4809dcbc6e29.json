{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.createOrReuseStyleNode=createOrReuseStyleNode;exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _extends2=_interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));var _reactNative=require(\"react-native\");var _AnimatedNode2=_interopRequireDefault(require(\"./AnimatedNode\"));var _AnimatedTransform=require(\"./AnimatedTransform\");var _lodash=_interopRequireDefault(require(\"lodash.isequal\"));function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2.default)(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2.default)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return(0,_possibleConstructorReturn2.default)(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function sanitizeStyle(inputStyle){var style;for(var key in inputStyle){var value=inputStyle[key];if(value instanceof _AnimatedNode2.default){if(style===undefined){style={};}style[key]=value.__nodeID;}}return style;}function createOrReuseStyleNode(style,oldNode){style=_reactNative.StyleSheet.flatten(style)||{};if(style.transform){var transform=(0,_AnimatedTransform.createOrReuseTransformNode)(style.transform,oldNode&&oldNode._style.transform);if(transform){style=(0,_extends2.default)({},style,{transform:transform});}}var config=sanitizeStyle(style);if(config===undefined){return undefined;}if(oldNode&&(0,_lodash.default)(config,oldNode._config)){return oldNode;}return new AnimatedStyle(style,config);}var AnimatedStyle=function(_AnimatedNode){(0,_inherits2.default)(AnimatedStyle,_AnimatedNode);var _super=_createSuper(AnimatedStyle);function AnimatedStyle(style,config){var _this;(0,_classCallCheck2.default)(this,AnimatedStyle);_this=_super.call(this,{type:'style',style:config},Object.values(style));_this._config=config;_this._style=style;return _this;}(0,_createClass2.default)(AnimatedStyle,[{key:\"toString\",value:function toString(){return\"AnimatedStyle, id: \"+this.__nodeID;}},{key:\"_walkStyleAndGetAnimatedValues\",value:function _walkStyleAndGetAnimatedValues(style){var updatedStyle={};for(var key in style){var value=style[key];if(value instanceof _AnimatedNode2.default){updatedStyle[key]=value.__getValue();}else if(value&&!Array.isArray(value)&&typeof value==='object'){updatedStyle[key]=this._walkStyleAndGetAnimatedValues(value);}}return updatedStyle;}},{key:\"__onEvaluate\",value:function __onEvaluate(){return this._walkStyleAndGetAnimatedValues(this._style);}}]);return AnimatedStyle;}(_AnimatedNode2.default);exports.default=AnimatedStyle;","map":{"version":3,"names":["sanitizeStyle","inputStyle","style","key","value","AnimatedNode","undefined","__nodeID","createOrReuseStyleNode","oldNode","StyleSheet","flatten","transform","createOrReuseTransformNode","_style","config","deepEqual","_config","AnimatedStyle","type","Object","values","updatedStyle","__getValue","Array","isArray","_walkStyleAndGetAnimatedValues"],"sources":["D:/React_Native/SourceCode_VPM_Swine/node_modules/react-native-reanimated/lib/reanimated1/core/AnimatedStyle.js"],"sourcesContent":["import { StyleSheet } from 'react-native';\n\nimport AnimatedNode from './AnimatedNode';\nimport { createOrReuseTransformNode } from './AnimatedTransform';\n\nimport deepEqual from 'lodash.isequal';\n\nfunction sanitizeStyle(inputStyle) {\n  let style;\n  for (const key in inputStyle) {\n    const value = inputStyle[key];\n    if (value instanceof AnimatedNode) {\n      if (style === undefined) {\n        style = {};\n      }\n      style[key] = value.__nodeID;\n    }\n  }\n  return style;\n}\n\nexport function createOrReuseStyleNode(style, oldNode) {\n  style = StyleSheet.flatten(style) || {};\n  if (style.transform) {\n    const transform = createOrReuseTransformNode(\n      style.transform,\n      oldNode && oldNode._style.transform\n    );\n    if (transform) {\n      style = {\n        ...style,\n        transform,\n      };\n    }\n  }\n  const config = sanitizeStyle(style);\n  if (config === undefined) {\n    return undefined;\n  }\n  if (oldNode && deepEqual(config, oldNode._config)) {\n    return oldNode;\n  }\n  return new AnimatedStyle(style, config);\n}\n\n/**\n * AnimatedStyle should never be directly instantiated, use createOrReuseStyleNode\n * in order to make a new instance of this node.\n */\nexport default class AnimatedStyle extends AnimatedNode {\n  constructor(style, config) {\n    super({ type: 'style', style: config }, Object.values(style));\n    this._config = config;\n    this._style = style;\n  }\n\n  toString() {\n    return `AnimatedStyle, id: ${this.__nodeID}`;\n  }\n\n  _walkStyleAndGetAnimatedValues(style) {\n    const updatedStyle = {};\n    for (const key in style) {\n      const value = style[key];\n      if (value instanceof AnimatedNode) {\n        updatedStyle[key] = value.__getValue();\n      } else if (value && !Array.isArray(value) && typeof value === 'object') {\n        // Support animating nested values (for example: shadowOffset.height)\n        updatedStyle[key] = this._walkStyleAndGetAnimatedValues(value);\n      }\n    }\n    return updatedStyle;\n  }\n\n  __onEvaluate() {\n    return this._walkStyleAndGetAnimatedValues(this._style);\n  }\n}\n"],"mappings":"mwBAAA,yCAEA,qEACA,sDAEA,8D,wtBAEA,QAASA,cAAT,CAAuBC,UAAvB,CAAmC,CACjC,GAAIC,MAAJ,CACA,IAAK,GAAMC,IAAX,GAAkBF,WAAlB,CAA8B,CAC5B,GAAMG,MAAK,CAAGH,UAAU,CAACE,GAAD,CAAxB,CACA,GAAIC,KAAK,WAAYC,uBAArB,CAAmC,CACjC,GAAIH,KAAK,GAAKI,SAAd,CAAyB,CACvBJ,KAAK,CAAG,EAAR,CACD,CACDA,KAAK,CAACC,GAAD,CAAL,CAAaC,KAAK,CAACG,QAAnB,CACD,CACF,CACD,MAAOL,MAAP,CACD,CAEM,QAASM,uBAAT,CAAgCN,KAAhC,CAAuCO,OAAvC,CAAgD,CACrDP,KAAK,CAAGQ,uBAAA,CAAWC,OAAX,CAAmBT,KAAnB,GAA6B,EAArC,CACA,GAAIA,KAAK,CAACU,SAAV,CAAqB,CACnB,GAAMA,UAAS,CAAG,GAAAC,6CAAA,EAChBX,KAAK,CAACU,SADU,CAEhBH,OAAO,EAAIA,OAAO,CAACK,MAAR,CAAeF,SAFV,CAAlB,CAIA,GAAIA,SAAJ,CAAe,CACbV,KAAK,0BACAA,KADA,EAEHU,SAAS,CAATA,SAFG,EAAL,CAID,CACF,CACD,GAAMG,OAAM,CAAGf,aAAa,CAACE,KAAD,CAA5B,CACA,GAAIa,MAAM,GAAKT,SAAf,CAA0B,CACxB,MAAOA,UAAP,CACD,CACD,GAAIG,OAAO,EAAI,GAAAO,eAAA,EAAUD,MAAV,CAAkBN,OAAO,CAACQ,OAA1B,CAAf,CAAmD,CACjD,MAAOR,QAAP,CACD,CACD,MAAO,IAAIS,cAAJ,CAAkBhB,KAAlB,CAAyBa,MAAzB,CAAP,CACD,C,GAMoBG,c,oHACnB,uBAAYhB,KAAZ,CAAmBa,MAAnB,CAA2B,4DACzB,uBAAM,CAAEI,IAAI,CAAE,OAAR,CAAiBjB,KAAK,CAAEa,MAAxB,CAAN,CAAwCK,MAAM,CAACC,MAAP,CAAcnB,KAAd,CAAxC,EACA,MAAKe,OAAL,CAAeF,MAAf,CACA,MAAKD,MAAL,CAAcZ,KAAd,CAHyB,aAI1B,C,+DAED,mBAAW,CACT,4BAA6B,KAAKK,QAAlC,CACD,C,8CAED,wCAA+BL,KAA/B,CAAsC,CACpC,GAAMoB,aAAY,CAAG,EAArB,CACA,IAAK,GAAMnB,IAAX,GAAkBD,MAAlB,CAAyB,CACvB,GAAME,MAAK,CAAGF,KAAK,CAACC,GAAD,CAAnB,CACA,GAAIC,KAAK,WAAYC,uBAArB,CAAmC,CACjCiB,YAAY,CAACnB,GAAD,CAAZ,CAAoBC,KAAK,CAACmB,UAAN,EAApB,CACD,CAFD,IAEO,IAAInB,KAAK,EAAI,CAACoB,KAAK,CAACC,OAAN,CAAcrB,KAAd,CAAV,EAAkC,MAAOA,MAAP,GAAiB,QAAvD,CAAiE,CAEtEkB,YAAY,CAACnB,GAAD,CAAZ,CAAoB,KAAKuB,8BAAL,CAAoCtB,KAApC,CAApB,CACD,CACF,CACD,MAAOkB,aAAP,CACD,C,4BAED,uBAAe,CACb,MAAO,MAAKI,8BAAL,CAAoC,KAAKZ,MAAzC,CAAP,CACD,C,2BA3BwCT,sB"},"metadata":{},"sourceType":"script"}